export interface ChangelogEntry {
  version: string; // semver without build hash
  date: string; // YYYY-MM-DD
  added?: string[];
  improved?: string[];
  fixed?: string[];
  notes?: string[];
}

// Keep newest first. This list is shown in Info and acts as user-facing release notes.
export const CHANGELOG: ChangelogEntry[] = [
  {
    version: "0.1.648",
    date: "2026-01-23",
    improved: [
      "Выбор сообщений: альбом (2+ фото) выбирается как группа (выбираются все элементы)",
      "Выбор сообщений: чекбоксы для документов/аудио размещены внутри блока вложения (без ломания лейаута)",
      "Выбор сообщений: для исходящих сообщений чекбокс справа от пузыря",
      "Выбор: запрещено выбирать action/service и сообщения со статусом sending/queued/error",
    ],
  },
  {
    version: "0.1.647",
    date: "2026-01-23",
    improved: [
      "Выбор сообщений: добавлены чекбоксы в истории (selection mode)",
      "Выбор сообщений: Shift+Click выбирает диапазон, drag по чекбоксам — массовый выбор/снятие",
      "Выбор: клики по ссылкам/кнопкам/аудио/видео не ломаются в режиме выбора",
    ],
  },
  {
    version: "0.1.646",
    date: "2026-01-23",
    improved: [
      "Контекст‑меню сообщений: если выделен текст внутри сообщения — доступны «Скопировать/Цитировать/Искать выделенное»",
      "Запланированные сообщения (очередь): добавлены действия «Отправить сейчас» и «Изменить время…»",
      "Выбор сообщений: добавлены действия «Скопировать», «Скачать» (для файлов) и «Отправить сейчас» (для запланированных)",
    ],
  },
  {
    version: "0.1.645",
    date: "2026-01-23",
    improved: [
      "Сообщения: контекст‑меню стало ближе к tweb — добавлены «Цитировать», «Скачать», «Скопировать ссылку», «Перевести» и «Ответы» (если есть)",
    ],
  },
  {
    version: "0.1.644",
    date: "2026-01-23",
    improved: [
      "Чатлист: сортировка стала tweb/Telegram-like — pin → по времени последнего сообщения (без лишних «прыжков» от unread/draft)",
      "Контакты: подпись online/last-seen обновляется автоматически (cadence ~30s)",
    ],
  },
  {
    version: "0.1.643",
    date: "2026-01-23",
    improved: [
      "Чатлист: tweb parity — menu-open фон выровнен с hover (filled-secondary), subtitle на desktop = 12px",
      "Чатлист: на мобильных активная строка не инвертирует цвета (как в Telegram)",
      "Сообщения: max-width bubble на handhelds выровнен под tweb (calc(100% - 89px))",
    ],
  },
  {
    version: "0.1.642",
    date: "2026-01-23",
    improved: ["Info: «История изменений» обновлена — добавлены последние релизы 0.1.638–0.1.641"],
  },
  {
    version: "0.1.641",
    date: "2026-01-23",
    improved: ["Авторизация: экран входа стал full-page (tweb-like) — верстка через `#auth-pages`, без «маленькой модалки»"],
    notes: ["Авторизация: размеры/брейкпоинты выровнены под tweb (max-width 720, высоты 810/760, брейк 721)"],
  },
  {
    version: "0.1.640",
    date: "2026-01-22",
    improved: ["Сайдбар: фильтры чатов доступны на desktop browser и PWA standalone (не только mobile)"],
    notes: ["Сайдбар: добавлены фильтры «Личные» и «Группы»"],
  },
  {
    version: "0.1.639",
    date: "2026-01-22",
    improved: ["Реакции: в контекстном меню сообщений добавлен выбор «другая реакция» (через emoji-popover)"],
    notes: ["Tweb parity: закрыт список pending UI-пунктов; device/PWA проверки можно выполнить позже"],
  },
  {
    version: "0.1.638",
    date: "2026-01-22",
    improved: ["Аватары: загрузка/редактирование обновляет аватар в UI сразу (sidebar/chat) — без перезагрузки страницы"],
  },
  {
    version: "0.1.637",
    date: "2026-01-21",
    fixed: [
      "Сообщения: статус «прочитано» больше не понижается обратно в «доставлено» при поздних ACK",
      "Синхронизация: unread_counts обновляется на всех устройствах/вкладках пользователя",
    ],
    improved: [
      "Статусы DM: добавлен этап «отправлено» (✓) и receipt delivered_to_device (✓✓)",
      "Файлы: входящие file_offer авто‑принимаются в активной вкладке (и в лидере, если все вкладки в фоне) — без «залипания»",
    ],
    notes: ["Тех.: новый тип события message_delivered_to_device (best‑effort, без лома старых клиентов)"],
  },
  {
    version: "0.1.636",
    date: "2026-01-21",
    improved: [
      "Уведомления: single-notifier между вкладками (Web Locks + BroadcastChannel) — без дублей тостов/звуков/Notification",
      "Тех.: client_info отправляет instance_id (на вкладку) и build_id; сервер логирует их для диагностики",
    ],
  },
  {
    version: "0.1.635",
    date: "2026-01-21",
    fixed: [
      "Файлы: входящие файлы больше не требуют «Принять» (без лишних уведомлений/полосок в списке диалогов)",
      "Файлы: оффер не пересылается повторно при каждом логине (без «мигания» уведомлений)",
    ],
    improved: [
      "Уведомления: входящие файлы показывают системное уведомление, когда вкладка скрыта",
      "Уведомления: входящие файлы отправляют Web Push, если получатель оффлайн",
      "Info: «История изменений» — только последние 5 записей (без «Показать ещё»)",
      "Тех.: client_info отправляет device_id/run_id + platform hints (web/PWA) для диагностики",
    ],
  },
  {
    version: "0.1.626",
    date: "2026-01-20",
    improved: ["Файлы: загрузка/скачивание через HTTP (/files) — без base64-чанков и со streaming/Range"],
    notes: ["Тех.: resumable upload (offset) + ACK file_downloaded → file_received"],
  },
  {
    version: "0.1.625",
    date: "2026-01-20",
    fixed: ["История: альбом/группировка фото (2+ подряд) — убран «отступ справа» у msg-out; тайлы остаются безрамочными"],
  },
  {
    version: "0.1.623",
    date: "2026-01-20",
    improved: ["Info: «История изменений» показывает последние 5 записей (без кнопки «Показать ещё»)"],
  },
  {
    version: "0.1.622",
    date: "2026-01-20",
    notes: [
      "Info: обновили «Историю изменений» (теперь включает последние релизы)",
      "Обновление клиента: если после деплоя версия не изменилась — нажмите Ctrl/Cmd+U (или сделайте hard reload/перезапуск PWA)",
      "Тех.: версия web-клиента повышается перед production deploy (patch bump) — чтобы версия в Info всегда соответствовала релизу",
    ],
  },
  {
    version: "0.1.621",
    date: "2026-01-20",
    improved: [
      "Viewer: zoom по клику по картинке теперь с pan/scroll (можно двигать увеличенное изображение)",
      "История: медиа-сообщения (фото/видео/аудио/альбомы) — без рамок/«карточек»",
    ],
  },
  {
    version: "0.1.620",
    date: "2026-01-20",
    fixed: ["История: исходящие фото/видео больше не рисуются с большой «аурой»/пустотой вокруг медиа"],
  },
  {
    version: "0.1.619",
    date: "2026-01-20",
    improved: ["История: исходящие вложения (фото/видео/альбомы) визуально в правой зоне (не «по центру»)"],
    notes: ["Тех.: добавлен обязательный bump версии web-клиента перед production deploy"],
  },
  {
    version: "0.1.618",
    date: "2026-01-16",
    fixed: [
      "PWA/desktop: меню (контекстное) больше не дергается при фоновых обновлениях; клики не срываются",
      "История: восстановление медиа-превью из локального кэша батчами (меньше дерганья после перезагрузки)",
      "Файлы: отображаем отдельный список реально кэшированных файлов (CacheStorage)",
      "Кэш: при ошибке квоты делаем best-effort очистку старых файлов и повтор cache.put",
      "Медиа: aspect-ratio cache сохраняется между перезагрузками",
    ],
  },
  {
    version: "0.1.617",
    date: "2026-01-16",
    fixed: ["PWA: Service Worker не валит обновление при ошибках CacheStorage/квоты; fallback на сеть для index/ассетов"],
  },
  {
    version: "0.1.616",
    date: "2026-01-16",
    fixed: ["PWA: обновление стало надёжнее (устойчивый install, BUILD_ID от SW, recovery при залипании)"],
  },
  {
    version: "0.1.615",
    date: "2026-01-16",
    improved: ["Desktop PWA: история стабильнее при докачке/превью (якорь + aspect-ratio cache)"],
  },
  {
    version: "0.1.614",
    date: "2026-01-15",
    improved: ["Медиа: превью image/video с корректным ratio; video viewer без autoplay/mute; автопауза offscreen"],
  },
  {
    version: "0.1.613",
    date: "2026-01-15",
    fixed: ["iOS: композер «прилипает» к клавиатуре (без большого зазора снизу)"],
  },
  {
    version: "0.1.612",
    date: "2026-01-15",
    fixed: ["iOS: убрана чёрная полоса снизу при открытии по ссылке (fullscreen)"],
  },
  {
    version: "0.1.611",
    date: "2026-01-15",
    fixed: [
      "Desktop PWA: автообновление может примениться даже при черновике в композере (после паузы; черновики сохраняются)",
    ],
  },
  {
    version: "0.1.610",
    date: "2026-01-15",
    fixed: [
      "Mobile: выбранная строка в чатлисте/контактах не инвертирует текст (без белого текста на прозрачном фоне)",
    ],
  },
  {
    version: "0.1.609",
    date: "2026-01-12",
    improved: [
      "История: стабилизация положения при лэйаут-сдвигах (якорь на видимом сообщении)",
    ],
  },
  {
    version: "0.1.608",
    date: "2026-01-12",
    improved: [
      "История: стабильная ширина скролла (scrollbar-gutter) и анти-флап wide-режима",
    ],
  },
  {
    version: "0.1.607",
    date: "2026-01-12",
    improved: [
      "История: кеш используется раньше (без лишней перезагрузки), подгрузка без зацикливания",
      "История: выравнивание текста сообщений стабилизировано",
    ],
  },
  {
    version: "0.1.606",
    date: "2026-01-12",
    improved: [
      "История: ширина пузырей 85% и центрирование ленты сообщений (desktop)",
    ],
  },
  {
    version: "0.1.605",
    date: "2026-01-12",
    improved: [
      "Фото: максимальная ширина ограничена 75% окна истории сообщений (desktop)",
    ],
  },
  {
    version: "0.1.604",
    date: "2026-01-12",
    improved: [
      "Файлы: входящие медиа принимаются автоматически и сразу ставятся в загрузку",
      "Файлы: уведомление «Входящий файл» исчезает после авто-принятия",
    ],
  },
  {
    version: "0.1.603",
    date: "2026-01-12",
    fixed: [
      "Файлы: принятие входящих файлов запускает авто-скачивание при зависании",
      "Файлы: входящий файл в открытом чате сразу помечается прочитанным",
      "Чатлист: индикатор упоминания не залипает после прочтения",
    ],
  },
  {
    version: "0.1.602",
    date: "2026-01-12",
    improved: [
      "Диалоги: desktop-типографика и геометрия строк ближе к tweb",
      "Контакты: компактные строки выровнены по высоте и ритму",
      "Mobile: хвостовая колонка и размеры аватаров стабильнее в списке",
    ],
  },
  {
    version: "0.1.601",
    date: "2026-01-12",
    improved: [
      "Медиа: размеры и ratio приведены к tweb (desktop 420×400, mobile 340×340)",
      "Альбомы: ширина/зазор сетки ближе к tweb (gap 1px)",
    ],
  },
  {
    version: "0.1.600",
    date: "2026-01-12",
    fixed: ["Медиа: предотвращены прыжки истории при догрузке фото/видео"],
    improved: [
      "Медиа: фиксированный кадр для фото/видео без динамической смены aspect-ratio",
      "Альбомы: жёсткая сетка и стабильные размеры ячеек в истории",
    ],
  },
  {
    version: "0.1.599",
    date: "2026-01-12",
    fixed: [
      "История: устранено пустое пространство над первым сообщением при полной загрузке",
      "История: автоповторы таймаута не мигают лоадером",
    ],
    improved: ["История: автозагрузка старых сообщений не срабатывает на автоскролле/сдвигах лейаута"],
  },
  {
    version: "0.1.598",
    date: "2026-01-12",
    fixed: ["История: снижены рывки/мигание при первичной загрузке (автоскролл ждёт историю)"],
    improved: ["История: warmup-подгрузка не стартует, пока активный чат ещё загружается"],
  },
  {
    version: "0.1.597",
    date: "2026-01-12",
    fixed: ["Видео: звук по умолчанию выключен, автоплей остаётся без аудио"],
  },
  {
    version: "0.1.596",
    date: "2026-01-12",
    improved: ["Mobile: нижнее меню «Сообщения/Профиль/Файлы» убрано"],
  },
  {
    version: "0.1.595",
    date: "2026-01-12",
    improved: [
      "История: адаптивные пороги виртуализации для mobile/slow network, меньше перегрузки при скролле",
      "История: кеш расширен и сохраняется при сворачивании вкладки",
      "Сообщения: meta-время и нижние отступы ровнее, меньше пересечений текста",
      "Контакты: tail-колонка стабильнее по высоте/ширине, ритм строки ровнее",
      "Медиа: повторное восстановление превью из кеша + центрирование в альбомах",
      "PWA: принудительное обновление делает hard reload при спорных версиях; iOS-подсказка короче",
      "Файлы: индикатор прогресса компактнее",
    ],
  },
  {
    version: "0.1.594",
    date: "2026-01-12",
    improved: [
      "История: sticky-даты и line-height ближе к tweb, меньше наложений при прокрутке",
      "Сообщения: meta-отступ и межстрочный ритм стабильнее на desktop/mobile",
      "Контакты: tail-колонка распределяет время/бейджи без пересечений",
      "Медиа: prefetch/очередь file_get адаптируются под медленную сеть и Save-Data",
      "История: warmup/preview паузятся в скрытой вкладке и при Save-Data",
    ],
  },
  {
    version: "0.1.593",
    date: "2026-01-12",
    improved: [
      "История: адаптивная параллельная прогрузка (5–7 потоков) и более мягкие лимиты на mobile",
      "История: расширен кеш (дольше хранится и больше сообщений на чат)",
      "Сообщения: увеличен нижний отступ и meta-время ниже текста на desktop/mobile",
      "Контакты: хвостовая колонка шире, сетка строк стабильнее при ресайзе",
      "PWA: принудительное обновление использует updateLatest при устаревшем build id, автоапдейт не мешает загрузке",
    ],
  },
  {
    version: "0.1.592",
    date: "2026-01-12",
    improved: [
      "История: отступ времени ниже текста стабильнее на desktop/mobile",
      "Медиа: inline видео получило play/pause поверх превью, авторазмер без лишнего кропа",
      "Альбомы фото: сетка плотнее и адаптивнее на мобильных экранах",
      "Контакты: типографика и хвостовая колонка чище, меньше пересечений",
      "PWA: install toast центрируется с безопасными отступами и переносами",
    ],
  },
  {
    version: "0.1.591",
    date: "2026-01-12",
    improved: [
      "История: альбомы фото группируются начиная с 2 сообщений, сетка плотнее и стабильнее",
      "Медиа: авторазмер превью фиксирует aspect-ratio без рывков",
      "Аудио: плейсхолдер + автоподгрузка в истории, контроль play/pause",
      "Шапка/подвал: более ровные тени и аккуратный фон",
    ],
  },
  {
    version: "0.1.590",
    date: "2026-01-11",
    improved: [
      "История: снижена нагрузка на mobile при фоновой прогрузке",
      "Медиа: очередь file_get (до 10 параллельно, prefetch 5-7) и расширенный кеш",
      "Фото/видео: стабилизирован aspect-ratio, автофокус по центру без резких прыжков",
      "Видео: auto-play в истории и viewer, звук по умолчанию выключен",
      "Видео: сервер конвертирует неподдерживаемые форматы в mp4",
    ],
  },
  {
    version: "0.1.589",
    date: "2026-01-11",
    improved: [
      "История: колонка сообщений, поиск и шапка прижаты к левому краю (меньше центрирования)",
      "Сообщения: больше вертикальный ритм, meta переносится и стабильно ниже текста",
      "Контакты: заголовок/время не пересекаются, ритм строк устойчивее",
      "Медиа: превью шире, увеличена максимальная высота",
      "История: усилена параллельная прогрузка и расширен кеш",
    ],
    fixed: ["История: даты не перекрывают друг друга при прокрутке"],
  },
  {
    version: "0.1.588",
    date: "2026-01-11",
    improved: [
      "Шапка/подвал: более чёткое разделение (тень/фон) и аккуратные отступы",
      "История: увеличен отступ meta — время стабильнее ниже текста на desktop/mobile",
      "Сообщения: уменьшен горизонтальный паддинг пузырей и более ровный вертикальный ритм",
      "Контакты: tail‑колонка выровнена, читаемость заголовков/времени улучшена",
      "Медиа: увеличена максимальная ширина превью (особенно на desktop wide)",
    ],
  },
  {
    version: "0.1.587",
    date: "2026-01-11",
    improved: [
      "История: wide‑layout прижимает колонку к левому краю и расширяет контейнер сообщений",
      "Сообщения: увеличен отступ meta (время ниже текста), меньше наложений",
      "Медиа: превью изображений/видео крупнее и устойчивее по ширине",
      "Контакты: шире tail‑колонка и правые отступы заголовков",
      "История: усилена параллельная прогрузка и увеличен кеш",
      "Файлы: индикатор прогресса компактнее и вращается",
      "PWA install toast: ширина адаптируется под экран, длинные строки переносятся",
    ],
    fixed: ["PWA: принудительное обновление использует updateLatest при устаревшем build id"],
  },
  {
    version: "0.1.585",
    date: "2026-01-11",
    improved: [
      "История: стабильнее вертикальный ритм и отступы meta (время ниже текста)",
      "История: wide‑layout активируется раньше, колонка шире и без центрирования",
      "Контакты: геометрия и шрифты ближе к tweb (высота/тайминги/подзаголовок)",
      "Медиа: увеличена ширина превью на desktop wide",
      "История: усилена параллельная прогрузка и расширен локальный кеш",
    ],
  },
  {
    version: "0.1.584",
    date: "2026-01-11",
    improved: [
      "История: более широкая колонка, увеличенный вертикальный ритм и стабильная meta‑строка",
      "Сообщения: увеличены внутренние отступы и межстрочные интервалы (desktop/mobile)",
      "Медиа: превью изображений/видео крупнее и стабильнее по ширине",
      "Контакты: более ровная сетка и выравнивание tail/таймингов",
      "История: увеличены лимиты кеша и параллельная прогрузка",
    ],
  },
  {
    version: "0.1.583",
    date: "2026-01-11",
    improved: [
      "История: шире колонка сообщений на desktop и стабильные отступы при ресайзе",
      "Сообщения: больше вертикального ритма и перенос meta без налезаний",
      "Контакты: выравнивание хвоста и плотность строк на desktop/mobile",
      "История: увеличена параллельная прогрузка и объём локального кеша",
      "Файлы: прогресс загрузки компактнее, без текстовой плашки",
    ],
  },
  {
    version: "0.1.582",
    date: "2026-01-11",
    improved: [
      "PWA desktop: история и инпут тянутся к левому краю, без центрирования колонки",
      "Сообщения: увеличен отступ времени и межстрочный ритм, меньше налезаний",
      "История: sticky-даты читаемее и стабильнее при прокрутке",
      "PWA: install toast на mobile компактнее и не выходит за границы",
    ],
    fixed: ["PWA: принудительное обновление делает ручной reload даже без waiting (fallback)"],
  },
  {
    version: "0.1.581",
    date: "2026-01-11",
    improved: [
      "Файлы: прогресс загрузки/скачивания теперь компактный круговой индикатор (без полосы)",
      "Файлы: статус загрузки компактнее, без процента в тексте",
    ],
  },
  {
    version: "0.1.580",
    date: "2026-01-11",
    improved: [
      "История: фоновая параллельная подгрузка нескольких чатов для ускоренного открытия",
      "История: кеш учитывает пустые чаты и курсоры для стабильного восстановления",
      "Сообщения: время отступает ниже текста (без налезания) на desktop/mobile",
      "PWA: install toast центрируется и ограничен по высоте экрана",
    ],
    fixed: ["PWA: update_required учитывает версии без build-hash для автообновления"],
  },
  {
    version: "0.1.579",
    date: "2026-01-11",
    improved: [
      "История: фоновая prefetch-подгрузка после первичной загрузки (параллельный before/delta)",
      "Сообщения: капшены медиа ближе к пузырю (меньше лишних зазоров)",
      "Медиа: time-бейдж на just-media читаемее на светлых превью",
      "Mobile: пузырь истории шире на узких экранах (меньше «узких» сообщений)",
    ],
    fixed: ["PWA: принудительное обновление не залипает на ожидании Service Worker (timeout ready)"],
  },
  {
    version: "0.1.578",
    date: "2026-01-11",
    improved: ["PWA: install toast на mobile центрируется и переносит длинный текст/кнопки без выхода за границы"],
  },
  {
    version: "0.1.577",
    date: "2026-01-11",
    fixed: [
      "PWA: принудительное обновление использует updateLatest как fallback для build id",
      "PWA: ручное обновление при updateLatest делает hard reload с восстановлением (boot recover)",
    ],
  },
  {
    version: "0.1.576",
    date: "2026-01-11",
    fixed: [
      "PWA: update_required с build id регистрирует SW при отсутствии и пробрасывает build id в автообновление",
      "PWA: кнопка «Обновить» использует hard reload с восстановлением (boot recover)",
    ],
  },
  {
    version: "0.1.575",
    date: "2026-01-11",
    improved: [
      "PWA: обновление учитывает BUILD_ID без waiting (skipWaiting) и перезапускает при новой сборке",
      "PWA: принудительное обновление запрашивает build id у SW и регистрирует SW при необходимости",
    ],
  },
  {
    version: "0.1.574",
    date: "2026-01-11",
    improved: [
      "История: клиентский кэш последних сообщений и курсоров (быстрее открытие чатов)",
      "История: параллельные before/since запросы для устойчивой синхронизации",
      "Сообщения: выровнены внутренние отступы и хвосты без артефактов (telegram-exact)",
      "Медиа: подписи под вложениями компактнее (telegram-exact)",
    ],
  },
  {
    version: "0.1.573",
    date: "2026-01-11",
    improved: [
      "Скины: оставлен только Telegram (точный)",
      "Медиа: cache-first автоподгрузка превью с типами по data-attrs",
    ],
    fixed: ["Сообщения: артефакт квадратного tail устранён (tweb-маска)"],
  },
  {
    version: "0.1.572",
    date: "2026-01-11",
    improved: [
      "Медиа: распознавание фото/видео/аудио по имени устойчиво к префиксам и скобкам",
      "История/медиа: автоподгрузка превью и истории повторяется после обновления списка/трансферов",
    ],
  },
  {
    version: "0.1.571",
    date: "2026-01-11",
    improved: [
      "Сообщения: интервалы групп/пузырей выровнены под tweb (telegram-exact)",
      "Медиа: автоподгрузка превью запускается сразу после рендера истории",
      "История: автодогрузка по высоте после рендера (стабильнее первичная загрузка)",
    ],
  },
  {
    version: "0.1.570",
    date: "2026-01-11",
    improved: ["Сообщения: DM без имён/аватаров, группы — ближе к tweb (telegram-exact)"],
  },
  {
    version: "0.1.569",
    date: "2026-01-11",
    improved: ["Сообщения: группировка имён/аватаров ближе к tweb (telegram-exact)"],
  },
  {
    version: "0.1.568",
    date: "2026-01-11",
    improved: [
      "Сообщения: метаданные времени встроены в bubble (telegram-exact, ближе к tweb)",
      "Медиа: превью в чате обновляются при прогрессе/готовности файла",
    ],
    fixed: ["История: «Загрузить ещё» доступна при наличии cursor даже без has_more"],
  },
  {
    version: "0.1.567",
    date: "2026-01-11",
    improved: ["Медиа: в viewer добавлена кнопка перехода к сообщению и полирован topbar (tweb)"],
  },
  {
    version: "0.1.566",
    date: "2026-01-11",
    improved: ["Медиа: в viewer добавлен topbar с автором и датой, ближе к tweb"],
    fixed: ["История: hasMore заполняется на любом непустом ответе без has_more (не «залипает» без «Загрузить ещё»)"],
  },
  {
    version: "0.1.565",
    date: "2026-01-11",
    improved: ["История: кнопка «Загрузить ещё» теперь появляется после первичного хвоста при отсутствии has_more"],
    fixed: ["История: historyHasMore заполняется на первичной подгрузке, чтобы не «залипать» без кнопки"],
  },
  {
    version: "0.1.564",
    date: "2026-01-11",
    improved: ["Сообщения: bubble-токены tweb для паддингов/радиусов (telegram-exact, меньше «разброса»)"],
    fixed: ["Медиа: распознавание фото/видео/аудио учитывает имена с разделителями/путями/параметрами (ENG/RU)"],
  },
  {
    version: "0.1.563",
    date: "2026-01-11",
    improved: ["Компоузер: вертикальные отступы и gap ближе к tweb, safe-area учитывается без среза"],
    fixed: ["Медиа: фото/видео/аудио распознаются по имени без расширения (ENG/RU), авто-подгрузка превью"],
  },
  {
    version: "0.1.562",
    date: "2026-01-11",
    improved: [
      "История/сообщения: ширина колонки совпадает с композером без дополнительного сужения",
      "Сообщения: max-width пузырей 85% от контейнера без жёсткого cap (tweb)",
      "Сообщения: более плотный внутренний ритм (gap 2px)",
    ],
    fixed: ["Медиа: превью фото/видео распознаются по имени без расширения (img/photo/video)"],
  },
  {
    version: "0.1.561",
    date: "2026-01-11",
    improved: [
      "Сообщения: tweb‑палитра пузырей и max-width 85% (telegram-exact)",
      "Сообщения: плоские пузыри без лишней тени (telegram-exact)",
      "Контакт-лист: menu-open фон ближе к tweb; активная строка только на десктопе",
    ],
  },
  {
    version: "0.1.560",
    date: "2026-01-11",
    improved: ["Фон истории/контактов ближе к tweb (telegram-exact)", "Chat padding 13/8 как в tweb"],
  },
  {
    version: "0.1.559",
    date: "2026-01-11",
    improved: ["История/сообщения: ширина колонки ближе к tweb (bubbles-inner)", "Контакт-лист: фон ближе к tweb"],
  },
  {
    version: "0.1.558",
    date: "2026-01-11",
    improved: ["История: автодогрузка не блокируется при неопределённом has_more (меньше «залипаний»)"],
    fixed: ["Медиа: битые превью сбрасываются и перезапрашиваются быстрее"],
  },
  {
    version: "0.1.557",
    date: "2026-01-11",
    improved: ["История: fallback подгрузки продолжает загрузку, пока сервер возвращает строки (меньше «залипаний»)"],
    fixed: ["Медиа: автоподгрузка превью работает даже при пустом mime/неполном имени файла"],
  },
  {
    version: "0.1.556",
    date: "2026-01-11",
    improved: ["Сообщения: имена/аватары в группах/досках группируются по tweb (имя на первом, аватар на tail)"],
    fixed: ["Медиа: автоподгрузка превью работает даже при неизвестном mime"],
  },
  {
    version: "0.1.555",
    date: "2026-01-11",
    improved: ["Сообщения: tweb‑типографика (16px/1.3125, meta 12px, автор 14px)"],
  },
  {
    version: "0.1.554",
    date: "2026-01-11",
    improved: ["Медиа: превью используют fileId/mime из transfer/offer, меньше пустых фото"],
  },
  {
    version: "0.1.553",
    date: "2026-01-11",
    improved: ["Сообщения: max-width пузырей ограничен 30rem (tweb), меньше «длинных капель»"],
  },
  {
    version: "0.1.552",
    date: "2026-01-11",
    improved: ["История/сообщения: ширина колонки всегда совпадает с композером (tweb)"],
  },
  {
    version: "0.1.551",
    date: "2026-01-11",
    improved: [
      "История: авто-повтор загрузки, если история не подгружена",
      "История/сообщения: ширина колонки выровнена с композером (tweb)",
    ],
    fixed: ["Медиа: прогрев превью из кэша не зависит от historyLoaded"],
  },
  {
    version: "0.1.550",
    date: "2026-01-11",
    improved: ["История: retry-плашка теперь доступна даже при наличии локальных сообщений"],
  },
  {
    version: "0.1.549",
    date: "2026-01-11",
    improved: [
      "История: добавлена кнопка повтора при неудачной загрузке",
      "История: ширина контейнера сообщений учитывает chat-input padding (tweb)",
      "Сообщения: max-width пузырей 85% от контейнера (tweb)",
      "Медиа: альбомы и пустые превью держат tweb-ширину/аспект",
    ],
  },
  {
    version: "0.1.548",
    date: "2026-01-11",
    improved: ["Сообщения: скругления групповых пузырей выровнены по tweb (mid-bubble)"],
  },
  {
    version: "0.1.547",
    date: "2026-01-11",
    improved: ["История: увеличен отступ после группы (tweb bubble-margin-big)"],
  },
  {
    version: "0.1.546",
    date: "2026-01-11",
    improved: [
      "Сообщения: окно группировки 121s, как в tweb (меньше «слипшихся» блоков)",
      "Медиа: альбомы группируются в том же окне (ближе к tweb)",
    ],
  },
  {
    version: "0.1.545",
    date: "2026-01-11",
    improved: [
      "Сообщения: включены bubble-tail в tweb-ритме (мягкая геометрия)",
      "История: групповые отступы выровнены с gap истории",
    ],
  },
  {
    version: "0.1.544",
    date: "2026-01-11",
    improved: [
      "Сообщения: max-width пузырей приведен к tweb (30rem)",
      "История: расстояние между сообщениями ближе к tweb (gap 2px)",
    ],
    fixed: ["Медиа: превью всегда сохраняют file_id для восстановления при битом url"],
  },
  {
    version: "0.1.543",
    date: "2026-01-11",
    improved: [
      "История: ширина контейнера сообщений приведена к tweb (max-width с учетом отступов)",
      "Сообщения: max-width пузырей рассчитывается от ширины контейнера истории (tweb 85%)",
    ],
    fixed: [
      "История: подгрузка не залипает, если сервер отдает has_more=0 при полном лимите",
      "Медиа: повторная автодогрузка превью при неудачной загрузке",
    ],
  },
  {
    version: "0.1.542",
    date: "2026-01-11",
    improved: [
      "Сообщения: ширина пузыря под контент (tweb‑поведение, без «длинных капель»)",
      "История: подгрузка менее хрупкая при отсутствии has_more в ответе сервера",
      "Медиа: превью изображений загружаются сразу (без зависания lazy‑режима)",
    ],
  },
  {
    version: "0.1.541",
    date: "2026-01-11",
    improved: [
      "Медиа: ширины превью/аудио/альбомов выровнены под сообщения (tweb‑ритм)",
      "Медиа: hover‑трансформации отключены для более стабильного вида",
    ],
  },
  {
    version: "0.1.540",
    date: "2026-01-11",
    improved: [
      "Сообщения: ширина пузырей, хвосты и DM‑выравнивание ближе к tweb",
      "История: контейнер сообщений стабилен при скролле и ререндере",
    ],
    fixed: [
      "История: добавлен таймаут и автоповтор запросов, чтобы не зависала подгрузка",
      "Медиа: автодогрузка превью фото работает и для входящих файлов",
    ],
  },
  {
    version: "0.1.539",
    date: "2026-01-11",
    improved: ["История: системные сообщения оформлены service-плашкой как в tweb"],
  },
  {
    version: "0.1.538",
    date: "2026-01-11",
    improved: [
      "История: пустой чат центрирован и оформлен как service-плашка (tweb)",
      "История: для пустого чата убран нижний псевдо‑отступ",
    ],
  },
  {
    version: "0.1.537",
    date: "2026-01-11",
    improved: [
      "Медиа: just‑media использует highlight‑фон для тайм‑бейджа (tweb)",
      "Медиа: тайм‑бейдж чуть отступает от правого/нижнего края (tweb)",
    ],
  },
  {
    version: "0.1.536",
    date: "2026-01-11",
    improved: [
      "Медиа: just‑media мета выровнена по правому краю (как в tweb)",
      "Медиа: тайм‑фон для image/video без текста — по message‑time background",
    ],
  },
  {
    version: "0.1.535",
    date: "2026-01-11",
    improved: [
      "Медиа: видео без текста тоже в режиме just‑media (без пузыря)",
      "Медиа: image/video превью без рамки и hover‑карточки",
    ],
  },
  {
    version: "0.1.534",
    date: "2026-01-11",
    improved: [
      "Медиа: image‑only вложения без пузыря (just‑media, прозрачный фон)",
      "Сообщения: лишняя карточка вокруг одиночных фото убрана",
    ],
  },
  {
    version: "0.1.533",
    date: "2026-01-11",
    improved: [
      "Медиа: изображения без текста теперь без обрезки (contain, без hover‑зума)",
      "История: кнопка «Загрузить ещё» оформлена как разделитель, ближе к tweb",
    ],
  },
  {
    version: "0.1.532",
    date: "2026-01-11",
    improved: [
      "Медиа: тайм‑бейдж и кнопки поверх превью читаемее (фон + blur)",
      "Медиа: лёгкий нижний градиент и более воздушная подпись у вложений",
    ],
  },
  {
    version: "0.1.531",
    date: "2026-01-11",
    improved: [
      "Медиа-превью: лимиты размеров ближе к tweb (420/451px)",
      "Медиа-превью: max-height видео/фото под tweb (400px)",
    ],
  },
  {
    version: "0.1.530",
    date: "2026-01-11",
    improved: [
      "Файлы в истории: тюнинг размеров/типографики и иконки под tweb",
      "Файлы в истории: кнопка скачивания компактнее и ближе к tweb",
    ],
  },
  {
    version: "0.1.529",
    date: "2026-01-11",
    improved: [
      "Файлы в истории: карточка документа ближе к tweb (иконка, отступы, высота)",
      "Файлы в истории: типографика имени и meta выровнены под tweb",
    ],
  },
  {
    version: "0.1.528",
    date: "2026-01-11",
    improved: [
      "Viewer overlay: переключатели prev/next добавлены в боковые зоны (tweb-поведение)",
      "Viewer overlay: стрелки появляются при наведении и не перекрывают подпись",
    ],
  },
  {
    version: "0.1.527",
    date: "2026-01-11",
    improved: [
      "Viewer overlay: topbar кнопки и навигация ближе к tweb (минимальная хрома, hover-opacity)",
      "Viewer overlay: подписи к медиа аккуратнее (line-height, прозрачность, hover/focus, mobile align)",
    ],
  },
  {
    version: "0.1.526",
    date: "2026-01-11",
    improved: ["История: date separators/headers ближе к tweb (размер, отступы, типографика)"],
  },
  {
    version: "0.1.525",
    date: "2026-01-11",
    improved: [
      "Медиа: play‑overlay ближе к tweb (фон/геометрия/иконка)",
      "Медиа: кнопки действий поверх превью приведены к tweb‑стилю",
    ],
  },
  {
    version: "0.1.524",
    date: "2026-01-11",
    improved: [
      "Медиа: тайм‑бейджи на вложениях ближе к tweb (позиция, плотность, фон)",
      "Сообщения: фон time‑бейджей теперь берется из message‑time background (tweb‑token)",
    ],
  },
  {
    version: "0.1.523",
    date: "2026-01-10",
    improved: [
      "История: unread‑разделитель ближе к tweb (фон/ритм/line‑height)",
      "История: jump‑to‑bottom кнопка по tweb (позиция, размер, тени, бейдж)",
    ],
  },
  {
    version: "0.1.522",
    date: "2026-01-10",
    improved: [
      "Helper bar: reply/forward ближе к tweb (размеры, отступы, акцент, кнопка отмены)",
      "Панель действий: выбор сообщений выровнен под tweb (ширина, кнопки, ритм)",
    ],
  },
  {
    version: "0.1.521",
    date: "2026-01-10",
    improved: [
      "Viewer overlay: подпись поверх медиа (tweb‑позиция, max-height, градиент)",
      "Viewer overlay: компактные кнопки действий и download в шапке",
      "Viewer overlay: быстрый zoom для изображений (1x/2x + dblclick)",
    ],
  },
  {
    version: "0.1.520",
    date: "2026-01-10",
    improved: [
      "История: мета‑строка сообщений без лишнего верхнего отступа (tweb‑ритм)",
      "Ответы/пересылки: компактнее meta/preview, выровнены line‑height",
      "Медиа: подписи под вложениями приведены к размеру/line‑height основного текста",
    ],
  },
  {
    version: "0.1.519",
    date: "2026-01-10",
    improved: [
      "История: более tweb‑группировка (ровный внутренний ритм + больше воздуха между группами)",
      "Ответы/пересылки: компактный preview с clamp до 2 строк",
      "Медиа: тайм‑бейдж подогнан по tweb (18px высота, аккуратный паддинг)",
      "Сообщения: подписи и превью с выровненным line-height",
    ],
  },
  {
    version: "0.1.518",
    date: "2026-01-10",
    improved: [
      "История: группировка сообщений ближе к tweb (компактный внутренний ритм + больше воздуха между группами)",
      "Ответы/пересылки: компактный блок preview, переносы и защита от overflow",
      "Медиа: альбомы плотнее (2px gap), аккуратные скругления, time‑badge читаемее",
      "Сообщения: мета‑строка и имена аккуратнее (ellipsis для длинных имён)",
    ],
  },
  {
    version: "0.1.517",
    date: "2026-01-10",
    improved: [
      "История: tweb‑ширина колонки (728px) и bubble max‑width 85% от контейнера",
      "Композер: выровненные размеры/отступы по tweb (chat‑pad ~13px, input 54px)",
      "Wide‑режим: убрано растягивание сообщений до краёв",
      "Типографика: базовый размер сообщений 16px и мета 12px",
    ],
  },
  {
    version: "0.1.516",
    date: "2026-01-10",
    improved: [
      "История: tweb‑ритм отступов и ширины пузырей, выверенные радиусы в группах",
      "Медиа: превью в пузыре без лишних отступов, аккуратные оверлей‑кнопки",
      "Сообщения: компактнее мета‑строка и тайм‑бэйдж для медиа без подписи",
    ],
  },
  {
    version: "0.1.515",
    date: "2026-01-10",
    improved: ["Обновления: при update_required с build id запускаем SW update без модального окна"],
  },
  {
    version: "0.1.514",
    date: "2026-01-10",
    improved: [
      "PWA: офлайн‑очередь исходящих сообщений и автодосылка через Background Sync",
      "PWA: тихие push‑сигналы пробуждают синхронизацию очереди",
      "Outbox: синхронизация статусов с сервис‑воркером и очистка при разлогине",
    ],
  },
  {
    version: "0.1.513",
    date: "2026-01-10",
    improved: [
      "История: колонка и композер выровнены по общему max-width, аккуратный центр без прилипания к краям",
      "Сообщения: обновлены слои/радиусы/мета по 8px‑сетке, исходящие без аватаров и лишней шапки",
      "Ответы/пересылки/вложения: защита от overflow и более крупные превью",
    ],
  },
  {
    version: "0.1.512",
    date: "2026-01-10",
    improved: [
      "История: колонка сообщений расширена и выровнена влево, единая сетка 8px и читабельный max-width",
      "Сообщения: мягкие карточки без хвостов, единый стиль пузырей/меты во всех скинах",
      "Вложения/ответы: упрощённые блоки, аккуратные отступы и контроль overflow",
      "Dark premium: обновлена палитра и кнопка отправки без фиолетового градиента",
    ],
  },
  {
    version: "0.1.511",
    date: "2026-01-10",
    improved: [
      "История: раскладка сообщений приведена к Telegram/tweb (радиусы 15/5, tail-форма как в tweb)",
      "История: ритм и зазоры повторяют tweb (2px gap, line-height 1.3125, паддинги 8/4/5)",
      "Мета: время и статусы выровнены вправо внутри bubble, как в tweb",
    ],
  },
  {
    version: "0.1.510",
    date: "2026-01-09",
    improved: [
      "Layout: колонка сообщений и композер выровнены по tweb (728px, центрированная колонка)",
      "Сообщения: bubble‑ширина 85% от колонки, исходящие выравнены вправо",
      "Композер: иконки внутри поля, размеры/зазоры приведены к tweb",
    ],
  },
  {
    version: "0.1.509",
    date: "2026-01-09",
    improved: [
      "История: ширина колонки сообщений ограничена по phi и выровнена по левому краю",
      "История: более собранная типографика и ритм строк для читаемости",
      "Композер: уточнены размеры, зазоры и визуальное согласование кнопок с полем ввода",
    ],
  },
  {
    version: "0.1.508",
    date: "2026-01-09",
    improved: [
      "Композер: иконки вынесены в отдельные кнопки, поле ввода стало самостоятельным элементом",
      "Композер: уменьшена высота строки, выровнены размеры кнопок и поля",
    ],
  },
  {
    version: "0.1.507",
    date: "2026-01-09",
    improved: [
      "Desktop: история и композер растянуты на полную ширину во всех скинах",
      "История: bubble‑режим больше не ограничивает ширину контейнера сообщений",
    ],
  },
  {
    version: "0.1.506",
    date: "2026-01-09",
    improved: [
      "Desktop: убрано центрирование истории и строки ввода, ширина теперь 100%",
    ],
  },
  {
    version: "0.1.505",
    date: "2026-01-09",
    improved: [
      "Desktop: увеличена ширина истории сообщений и строки ввода",
    ],
  },
  {
    version: "0.1.504",
    date: "2026-01-09",
    improved: [
      "Desktop: визуально разделены история сообщений и поле ввода в диалоге",
    ],
  },
  {
    version: "0.1.503",
    date: "2026-01-09",
    improved: [
      "Viewer overlay: header/actions/caption выровнены по phi‑ритму",
      "Viewer overlay: размеры навигации и safe‑area подогнаны по phi‑пропорциям",
    ],
  },
  {
    version: "0.1.502",
    date: "2026-01-09",
    improved: [
      "Композер: helper bar для reply/forward выровнен по phi‑ритму",
      "Панель действий: кнопки и контейнер подогнаны по phi‑пропорциям",
    ],
  },
  {
    version: "0.1.501",
    date: "2026-01-09",
    improved: [
      "Композер: phi‑ритм размеров и отступов для кнопок/поля ввода",
      "Композер: более ровные пропорции safe‑area и gap между действиями",
    ],
  },
  {
    version: "0.1.500",
    date: "2026-01-09",
    fixed: [
      "PWA/Desktop: автообновление не блокируется фокусом на пустом композере",
      "PWA/Desktop: обновления применяются надёжнее без ручной перезагрузки",
    ],
  },
  {
    version: "0.1.499",
    date: "2026-01-09",
    improved: [
      "История: плоский список сообщений без карточек/пузырей, единая колонка",
      "История: уплотнена группировка и аккуратные блоки вложений/ответов",
    ],
  },
  {
    version: "0.1.498",
    date: "2026-01-09",
    improved: [
      "История: full-screen группировка одной колонкой (Jabber/TWeb) без пузырей и «ёлочки»",
      "История: мета/реакции слева и сгруппированные цепочки без повторных аватаров",
    ],
  },
  {
    version: "0.1.497",
    date: "2026-01-08",
    improved: [
      "История: phi‑отступы, центр‑колонна и контроль ширины сообщений в full‑screen",
      "История: логин/аватарки и блоки пересылки/ответа выровнены без выхода за границы",
    ],
  },
  {
    version: "0.1.496",
    date: "2026-01-08",
    improved: [
      "Сообщения: внешний вид и форма унифицированы под стиль dark-premium во всех скинах",
    ],
  },
  {
    version: "0.1.495",
    date: "2026-01-08",
    improved: [
      "Скины: Telegram (точный) теперь по умолчанию",
      "Скины: оставлены Telegram (точный), Тёмная премиум и Amber",
    ],
  },
  {
    version: "0.1.494",
    date: "2026-01-08",
    improved: [
      "Скины: оставлены только стандартный, Telegram и тёмная премиальная темы",
    ],
  },
  {
    version: "0.1.493",
    date: "2026-01-08",
    improved: [
      "История: золотое сечение в геометрии, ритме и цветах сообщений",
      "История: более плавные джампы прокрутки (phi-скорость)",
    ],
  },
  {
    version: "0.1.492",
    date: "2026-01-08",
    improved: [
      "История: карточки сообщений более плоские и менее «пузырьковые» во всех скинах",
    ],
  },
  {
    version: "0.1.491",
    date: "2026-01-08",
    improved: [
      "Mobile: список в сайдбаре без лишнего отступа перед первым заголовком",
    ],
  },
  {
    version: "0.1.490",
    date: "2026-01-08",
    improved: [
      "Сайдбар: поиск с иконкой и более заметным фокусом",
      "Сайдбар: clear-кнопка поиска реагирует сразу и возвращает фокус",
    ],
  },
  {
    version: "0.1.489",
    date: "2026-01-08",
    improved: [
      "Контакты: в списке показывается статус (онлайн/last seen) и @handle",
      "Контакты: порядок контактов — online-first, затем last seen и имя",
      "Контакты: в табе Контакты убрана чат-мета (время/непрочитанные/реакции)",
    ],
  },
  {
    version: "0.1.488",
    date: "2026-01-08",
    improved: ["Контакты: добавлен заголовок секции для активного списка (tweb parity)"],
  },
  {
    version: "0.1.487",
    date: "2026-01-08",
    added: ["Сайдбар: архив контактов с переключателем в строке поиска (активные/архивные отдельно)"],
    improved: [
      "История: автодогрузка ранних сообщений начинается раньше при прокрутке вверх",
      "История: разделитель непрочитанных показывает количество",
      "Темы Telegram: menu-open фон в списке чатов выровнен с tweb",
    ],
  },
  {
    version: "0.1.486",
    date: "2026-01-07",
    fixed: ["PWA: принудительное обновление больше не показывает ошибку, если обновлений нет"],
  },
  {
    version: "0.1.485",
    date: "2026-01-07",
    improved: [
      "История: классический вид — пузыри не растягиваются на всю ширину",
      "История: классический вид — более плоские карточки без полос/глянца",
    ],
  },
  {
    version: "0.1.484",
    date: "2026-01-07",
    improved: [
      "История: вложения и подписи выровнены по отступам пузырей во всех скинах",
      "История: мета у вложений учитывает направление (in/out) и не съезжает",
    ],
  },
  {
    version: "0.1.483",
    date: "2026-01-05",
    fixed: [
      "PWA: исправлен цикл перезагрузки при совпадении версии и build-hash (активный buildId сохраняется)",
      "PWA: если SW уже активен и нет waiting — обновление не форсит перезагрузку",
    ],
  },
  {
    version: "0.1.482",
    date: "2026-01-05",
    fixed: [
      "PWA: авто‑обновление не замирает в ошибке — если SW уже активен, перезагружаемся; если нет — повторяем попытку",
      "PWA: убран блокирующий текст «Автообновление не удалось применить…» (заменено на тихий backoff)",
    ],
  },
  {
    version: "0.1.481",
    date: "2026-01-05",
    fixed: [
      "PWA: авто‑обновление больше не блокируется после первой неудачи (повторы + безопасный фолбек)",
      "PWA: сигнал обновления приходит даже без controller (холодный старт/восстановление)",
      "PWA: ручное обновление не перезагружает приложение, если SW не активирован",
      "PWA: сравнение buildId учитывает хэш — обновления без bump применяются",
      "PWA: ошибки Service Worker видны независимо от состояния Push",
    ],
  },
  {
    version: "0.1.480",
    date: "2026-01-05",
    improved: [
      "Темы: детальная подгонка истории сообщений для всех шаблонов (Dark/Light/Desktop/Gradient)",
      "Чат: обновлены пузыри, мета, ответы/пересылки и медиа-превью под референсы",
    ],
  },
  {
    version: "0.1.479",
    date: "2026-01-05",
    improved: [
      "Темы: Dark Premium и Light Mode приведены к HTML-шаблонам (геометрия пузырей, мета, вложения)",
      "Чат: детальная подгонка UI в Dark/Light без переключателя стиля",
    ],
  },
  {
    version: "0.1.478",
    date: "2026-01-05",
    improved: [
      "Темы: Dark Premium и Light Mode приведены к шаблонам (цвета, пузырьки, композер)",
      "Чат: стиль сообщений теперь полностью зависит от скина",
    ],
    fixed: ["Профиль: убран выбор «Отображение сообщений»"],
  },
  {
    version: "0.1.477",
    date: "2026-01-05",
    improved: [
      "Темы: добавлены 4 темы по шаблонам (Тёмная премиум, Светлая тема, Десктопная версия, Градиентный акцент)",
      "Шапка чата: добавлены неактивные кнопки аудио/видео звонка (внешний вид)",
    ],
  },
  {
    version: "0.1.476",
    date: "2026-01-05",
    improved: [
      "Чат: кардинально обновлен внешний вид сообщений — бизнес-карточки с цветным акцентом и 1px градиентной окантовкой",
      "Чат: три режима сообщений заметно различаются по геометрии/отступам/контрасту (Деловой/Контурный/Лаконичный)",
      "Сообщения: имя автора, мета, реакции, ответы, пересылки и подписи приведены к единому премиум-стилю",
      "Доски: карточки постов синхронизированы с новым стилем (padding/края/медиа)",
    ],
  },
  {
    version: "0.1.475",
    date: "2026-01-05",
    improved: [
      "Чат: три новых деловых режима сообщений (Деловой/Контурный/Лаконичный) вместо «Елочка/Список/Компактный»",
      "Чат: аватарки у всех сообщений, акценты логина и аккуратная 1px-окантовка",
      "Сообщения: реакции/ответы/пересылки/подписи/вложения оформлены единым стилем",
      "Доски: карточки постов выглядят как в чате, без хвостов/«гвоздиков»",
    ],
  },
  {
    version: "0.1.474",
    date: "2026-01-05",
    improved: [
      "Чат: карточки сообщений получают лёгкую цветную заливку от акцента логина",
      "История: зависшие запросы истории/превью сбрасываются при ошибках и разрыве связи",
      "PWA: журнал обновлений пишется в localStorage для диагностики",
    ],
    fixed: [
      "PWA: автообновление не перезагружает приложение без активации SW",
      "PWA: boot-защита останавливает бесконечные перезапуски",
    ],
  },
  {
    version: "0.1.473",
    date: "2026-01-05",
    improved: [
      "Чат: карточки сообщений подтянуты под стиль Info во всех режимах (ширина/паддинги)",
      "Доски: карточки сообщений без хвостов/«гвоздиков», ровные отступы как в ленте",
    ],
    fixed: ["PWA: автообновление больше не зацикливает перезагрузки (guard + ручной режим)"],
  },
  {
    version: "0.1.472",
    date: "2026-01-05",
    improved: [
      "Чат: карточки сообщений унифицированы как в Info (без группировки/ёлочки), единая ширина",
      "Чат: имя автора показывается в каждом сообщении, цвет берётся от логина",
      "История: кнопка «Загрузить ещё» для ручной подгрузки ранних сообщений",
      "Превью: автоподгрузка видимых медиа до 20 MB (фото/видео)",
    ],
    fixed: ["История: активный чат больше не обрезается лимитом", "Доски: хвостики/«гвоздики» по бокам не рисуются"],
  },
  {
    version: "0.1.471",
    date: "2026-01-05",
    improved: [
      "Чат: карточки сообщений выровнены по ширине и левому краю (Info-style)",
      "История: авто-догрузка ранних сообщений, если экран не заполнен",
      "Превью: повторная попытка загрузки при ошибках/таймауте",
    ],
    fixed: ["Чат: цвет акцента сообщения совпадает с цветом аватара автора"],
  },
  {
    version: "0.1.470",
    date: "2026-01-05",
    improved: [
      "Чат: все режимы сообщений приведены к карточкам в стиле Info (цвет логина + тонкая подсветка)",
      "История: авто-дозагрузка превью изображений при прокрутке",
    ],
    fixed: ["Доски: убраны декоративные «гвоздики» по бокам сообщений"],
  },
  {
    version: "0.1.469",
    date: "2026-01-04",
    improved: ["Чат: футер поиска использует chat-input padding (tweb parity)"],
  },
  {
    version: "0.1.468",
    date: "2026-01-04",
    improved: ["Чат: футер поиска выровнен по chat-input max-width (tweb parity)"],
  },
  {
    version: "0.1.467",
    date: "2026-01-04",
    improved: ["Чат: шапка и поиск выровнены по chat-input max-width (tweb parity)"],
  },
  {
    version: "0.1.466",
    date: "2026-01-04",
    fixed: ["Viewport: fallback на screen.height при нулевом viewport (композер/скролл не пропадают)"],
  },
  {
    version: "0.1.465",
    date: "2026-01-04",
    fixed: ["Viewport: fallback на последнюю высоту и сброс vv-offset (композер/скролл не пропадают)"],
  },
  {
    version: "0.1.464",
    date: "2026-01-04",
    improved: ["Выбор сообщений: ширина учитывает chat-input padding (tweb parity)"],
  },
  {
    version: "0.1.463",
    date: "2026-01-04",
    improved: ["История: ширина пузырей учитывает chat-input padding (tweb parity)"],
  },
  {
    version: "0.1.462",
    date: "2026-01-04",
    improved: ["Композер: токены chat-input border/max-width (tweb parity)"],
  },
  {
    version: "0.1.461",
    date: "2026-01-04",
    improved: ["Композер: токен chat-input btn-send margin (tweb parity)"],
  },
  {
    version: "0.1.460",
    date: "2026-01-04",
    improved: ["Композер: chat-input inner padding token (tweb parity)"],
  },
  {
    version: "0.1.459",
    date: "2026-01-04",
    improved: ["Композер: chat-input padding = chat padding (tweb parity)"],
  },
  {
    version: "0.1.458",
    date: "2026-01-04",
    improved: ["Композер: размер кнопок привязан к chat-input tokens"],
  },
  {
    version: "0.1.457",
    date: "2026-01-04",
    improved: ["Композер: токены chat-input size/padding для parity с tweb"],
  },
  {
    version: "0.1.456",
    date: "2026-01-04",
    improved: ["Сайдбар: виртуализация списка учитывает реальную высоту строки"],
  },
  {
    version: "0.1.455",
    date: "2026-01-04",
    fixed: ["Viewport: удерживаем последнюю стабильную высоту при обнулении innerHeight"],
  },
  {
    version: "0.1.454",
    date: "2026-01-04",
    improved: ["Сайдбар: chatlist без скругления строк на desktop (tweb плотнее)"],
  },
  {
    version: "0.1.453",
    date: "2026-01-04",
    fixed: ["Тесты: запуск `node --test` без невалидных флагов"],
  },
  {
    version: "0.1.452",
    date: "2026-01-04",
    fixed: ["Viewport: защита от нулевой высоты — композер/скролл не пропадают"],
  },
  {
    version: "0.1.451",
    date: "2026-01-04",
    improved: ["Сайдбар: фон menu-open ближе к tweb (light-filled secondary)"],
  },
  {
    version: "0.1.450",
    date: "2026-01-04",
    improved: ["Mobile: больше внутренний паддинг композера для кнопок"],
  },
  {
    version: "0.1.449",
    date: "2026-01-04",
    improved: ["Mobile: уменьшен зазор перед кнопкой отправки в композере"],
  },
  {
    version: "0.1.448",
    date: "2026-01-04",
    improved: ["Mobile: кнопки композера чуть крупнее и ровнее по высоте"],
  },
  {
    version: "0.1.447",
    date: "2026-01-04",
    improved: ["Композер: нижний отступ не опускается ниже базового при safe-area"],
  },
  {
    version: "0.1.446",
    date: "2026-01-04",
    improved: ["Композер: кнопки выровнены по нижнему краю"],
  },
  {
    version: "0.1.445",
    date: "2026-01-04",
    fixed: ["Меню: пункты открываются с первого тапа"],
  },
  {
    version: "0.1.444",
    date: "2026-01-04",
    fixed: ["Mobile: пункты меню открываются с первого тапа"],
  },
  {
    version: "0.1.443",
    date: "2026-01-04",
    improved: ["Desktop: пункт «Поиск» добавлен в меню ☰"],
  },
  {
    version: "0.1.442",
    date: "2026-01-04",
    fixed: ["Mobile: контакты открываются по одному тапу"],
  },
  {
    version: "0.1.441",
    date: "2026-01-04",
    improved: ["Desktop/PWA: меню убрано из табов, доступно через ☰", "Шапка: стрелка «назад» из чата, затем ☰ для меню"],
  },
  {
    version: "0.1.440",
    date: "2026-01-04",
    improved: ["Меню: добавлен глобальный поиск"],
  },
  {
    version: "0.1.439",
    date: "2026-01-04",
    fixed: ["iOS: починен appViewport (композер/скролл не пропадают)", "PWA: safe-bottom-pad учитывает gap safe-area"],
  },
  {
    version: "0.1.438",
    date: "2026-01-04",
    fixed: ["iPhone: safe-area снизу держится ≥34px, композер не клипится"],
  },
  {
    version: "0.1.437",
    date: "2026-01-04",
    notes: ["Тесты: запуск без предупреждения Node о --localstorage-file"],
  },
  {
    version: "0.1.436",
    date: "2026-01-04",
    improved: ["Mobile: фильтр «Упоминания» в списке чатов"],
  },
  {
    version: "0.1.435",
    date: "2026-01-04",
    improved: ["Mobile: панель действий композера компактнее по высоте"],
  },
  {
    version: "0.1.434",
    date: "2026-01-04",
    improved: ["Mobile: вертикальный паддинг ввода композера меньше, текст ближе к центру"],
  },
  {
    version: "0.1.433",
    date: "2026-01-04",
    improved: ["Mobile: кнопки композера крупнее, удобнее тапать"],
  },
  {
    version: "0.1.432",
    date: "2026-01-04",
    improved: ["Эмодзи: каталог загружается лениво (отдельный чанк), быстрее старт"],
  },
  {
    version: "0.1.431",
    date: "2026-01-04",
    fixed: ["Выбор/пересылка/закреп: убраны тонкие статусные подсказки в шапке при пустом выборе"],
  },
  {
    version: "0.1.430",
    date: "2026-01-04",
    fixed: ["Выбор/закрепы: убраны всплывающие подсказки при удалении и закреплении сообщений"],
  },
  {
    version: "0.1.429",
    date: "2026-01-04",
    improved: ["Desktop: на широком экране сообщения отображаются списком (без пузырей)"],
  },
  {
    version: "0.1.428",
    date: "2026-01-04",
    improved: ["Закрепы: компактная панель и явный переход к сообщению"],
  },
  {
    version: "0.1.427",
    date: "2026-01-04",
    improved: ["Выбор: панель действий (переслать/удалить/закрепить/отмена)"],
  },
  {
    version: "0.1.426",
    date: "2026-01-04",
    improved: ["Пересылка: выбор получателей через список контактов/чатов/досок"],
  },
  {
    version: "0.1.425",
    date: "2026-01-04",
    fixed: ["Закрепы: убраны заголовки «Закреплённые» (без микроподсказок)", "Выбор: без tooltip на кнопке отмены"],
  },
  {
    version: "0.1.424",
    date: "2026-01-04",
    fixed: ["Закрепы/выбор: убраны микроподсказки при закреплении/откреплении"],
  },
  {
    version: "0.1.423",
    date: "2026-01-03",
    improved: ["Sidebar: упрощены табы и поиск, меньше дублей обработчиков"],
  },
  {
    version: "0.1.422",
    date: "2026-01-03",
    fixed: ["PWA desktop: фильтры чатов скрыты, чтобы высота меню не менялась при «Чаты»"],
  },
  {
    version: "0.1.421",
    date: "2026-01-03",
    fixed: ["Desktop: в разделе «Чаты» фильтры убраны, чтобы не сжимать высоту меню"],
  },
  {
    version: "0.1.420",
    date: "2026-01-03",
    fixed: ["Mobile: тап по списку не запускает лишнюю swipe-анимацию (открытие чата стабильнее)"],
  },
  {
    version: "0.1.419",
    date: "2026-01-03",
    fixed: ["Desktop: высота табов/фильтров не сжимается при переключении на «Чаты»"],
  },
  {
    version: "0.1.418",
    date: "2026-01-03",
    fixed: ["Desktop: вкладка «Чаты» не сбрасывает состояние табов (без «плющения» меню)"],
  },
  {
    version: "0.1.417",
    date: "2026-01-03",
    fixed: ["Mobile: первый тап по списку открывает чат без автосфокуса поиска"],
  },
  {
    version: "0.1.416",
    date: "2026-01-03",
    fixed: ["Mobile: переход назад возвращает чат без остатка прошлой страницы"],
    improved: ["Меню: кнопка настроек получила мягкую анимацию"],
  },
  {
    version: "0.1.415",
    date: "2026-01-03",
    fixed: [
      "Desktop: убрано мигание значка закрепа в списке (без анимации)",
      "Mobile: клики по списку стабильнее (локальное подавление long‑press, быстрее повторный тап)",
    ],
  },
  {
    version: "0.1.414",
    date: "2026-01-03",
    fixed: [
      "Desktop: снижены лаги/мигание закрепов при наборе текста (sidebar/chat render cache)",
      "Chat: стабильный skip‑render при выключенном поиске",
    ],
  },
  {
    version: "0.1.413",
    date: "2026-01-03",
    fixed: [
      "Desktop: убран лишний таб «Меню», навигация через кнопку ☰",
      "Пересылка: forward‑черновик переносится при переключении чата/доски",
      "Mobile: long‑press по сообщению открывает контекст‑меню",
      "PWA: install‑prompt toast центрируется на экране",
      "Chat: снижены лишние перерисовки верхней панели при закрепах",
    ],
  },
  {
    version: "0.1.412",
    date: "2026-01-03",
    improved: ["Композер: send‑кнопка с тенью как у поля ввода (tweb‑style)"],
  },
  {
    version: "0.1.411",
    date: "2026-01-03",
    improved: ["Композер: кнопки attach/emoji/✏️ круглые (tweb‑style)"],
  },
  {
    version: "0.1.410",
    date: "2026-01-03",
    improved: ["Композер: send‑кнопка круглая и залитая акцентом (tweb‑style)"],
  },
  {
    version: "0.1.409",
    date: "2026-01-03",
    improved: ["Композер: send‑кнопка совпадает с высотой поля ввода (tweb parity)"],
  },
  {
    version: "0.1.408",
    date: "2026-01-03",
    improved: ["Композер: send‑кнопка по размеру как в tweb"],
  },
  {
    version: "0.1.407",
    date: "2026-01-03",
    improved: ["Композер: иконки выровнены по вертикали (tweb‑like offset)"],
  },
  {
    version: "0.1.406",
    date: "2026-01-03",
    improved: ["Композер: панель действий плотнее (высота/отступы helper‑бара)"],
  },
  {
    version: "0.1.405",
    date: "2026-01-03",
    improved: ["Композер: вертикальные отступы ближе к tweb (бар плотнее)"],
  },
  {
    version: "0.1.404",
    date: "2026-01-03",
    improved: ["Композер: расстояние между кнопками как в tweb (2px)"],
  },
  {
    version: "0.1.403",
    date: "2026-01-03",
    improved: ["Композер: вертикальный отступ текста как в tweb (8px)"],
  },
  {
    version: "0.1.402",
    date: "2026-01-03",
    improved: ["Композер: отступ кнопки отправки как в tweb (8px)"],
  },
  {
    version: "0.1.401",
    date: "2026-01-03",
    improved: ["История: контейнер сообщений ближе к tweb (micro overflow shim для пустого чата)"],
  },
  {
    version: "0.1.400",
    date: "2026-01-03",
    improved: ["История: восстановление скролла при prepend учитывает anchor key (устойчивее на локальных сообщениях)"],
  },
  {
    version: "0.1.399",
    date: "2026-01-03",
    improved: ["Чат: pinned-bottom и кнопка «Вниз» используют точный maxScrollTop"],
  },
  {
    version: "0.1.398",
    date: "2026-01-03",
    improved: ["Чат: группировка bubble ближе к tweb (верхние углы + хвост)"],
  },
  {
    version: "0.1.397",
    date: "2026-01-03",
    improved: ["Чат: хвосты bubble ближе к tweb (размер и позиция)"],
  },
  {
    version: "0.1.396",
    date: "2026-01-03",
    improved: ["Чат: вертикальный ритм сообщений ближе к tweb (межстрочный gap)"],
  },
  {
    version: "0.1.395",
    date: "2026-01-03",
    improved: ["Чат: разделители дат ближе к tweb (pill без линий)"],
  },
  {
    version: "0.1.394",
    date: "2026-01-03",
    improved: ["Чат: ширина bubble на desktop ближе к tweb (85%)"],
  },
  {
    version: "0.1.393",
    date: "2026-01-03",
    improved: ["Сайдбар: выделение активной строки только для chatlist (desktop)"],
  },
  {
    version: "0.1.392",
    date: "2026-01-03",
    improved: ["Сайдбар: hover‑фон строк ближе к tweb (light‑fill)"],
  },
  {
    version: "0.1.391",
    date: "2026-01-03",
    improved: ["Сайдбар: chatlist‑строки без скругления (tweb‑like geometry)"],
  },
  {
    version: "0.1.390",
    date: "2026-01-03",
    improved: ["Сайдбар: фон menu-open соответствует hover (tweb‑like)"],
  },
  {
    version: "0.1.389",
    date: "2026-01-03",
    improved: ["Сайдбар: chatlist виртуализируется для больших списков (tweb‑style slicing)"],
  },
  {
    version: "0.1.388",
    date: "2026-01-03",
    improved: ["Сайдбар: на мобильных selected‑строка и бейджи не инвертируются (tweb parity)"],
  },
  {
    version: "0.1.387",
    date: "2026-01-03",
    improved: ["Сайдбар: отступы списка теперь на chatlist‑контейнере (tweb‑like spacing)"],
  },
  {
    version: "0.1.386",
    date: "2026-01-03",
    improved: ["Сайдбар: списки чатов/контактов/досок обёрнуты в chatlist‑контейнер (база для virtual chatlist)"],
  },
  {
    version: "0.1.385",
    date: "2026-01-03",
    improved: ["PWA: вкладки сайдбара вынесены из скролла, структура ближе к tweb (шапка отдельно, tabs отдельно)"],
  },
  {
    version: "0.1.384",
    date: "2026-01-03",
    improved: ["Сайдбар: фильтры чатов оформлены как tweb‑tabs (высота/полоска/отступы)"],
  },
  {
    version: "0.1.383",
    date: "2026-01-02",
    improved: ["Сайдбар: фильтр чатов «Все/Непрочитанные» с бейджем непрочитанных (tweb-like)"],
  },
  {
    version: "0.1.382",
    date: "2026-01-02",
    improved: ["Сайдбар: tools‑меню в шапке (tweb‑like), статус соединения в меню"],
  },
  {
    version: "0.1.381",
    date: "2026-01-02",
    improved: ["Сайдбар: в шапке добавлены кнопки «Меню» и «Создать» (tweb-like)"],
    fixed: ["PWA/desktop: вкладка «Меню» снова получает свои стили (Info видно)"],
  },
  {
    version: "0.1.380",
    date: "2026-01-02",
    improved: ["Композер: send‑menu — «без звука» и «запланировать» (tweb‑like)"],
    fixed: ["Статусы отправки: «когда онлайн» и «запланировано» различимы в очереди"],
  },
  {
    version: "0.1.379",
    date: "2026-01-02",
    improved: ["Композер: меню отправки с режимом «когда онлайн» (tweb‑like)"],
  },
  {
    version: "0.1.378",
    date: "2026-01-02",
    improved: ["Композер: размеры кнопок и spacing ближе к tweb"],
  },
  {
    version: "0.1.377",
    date: "2026-01-02",
    improved: ["Композер: тени и вертикальные отступы на mobile ближе к tweb"],
  },
  {
    version: "0.1.376",
    date: "2026-01-02",
    improved: ["Композер: ширина на mobile выровнена под tweb (100% вместо 84%)"],
  },
  {
    version: "0.1.375",
    date: "2026-01-02",
    improved: ["История: хвосты bubble и группировка последнего сообщения ближе к tweb"],
  },
  {
    version: "0.1.374",
    date: "2026-01-02",
    improved: ["История: радиусы bubble и продолжения ближе к tweb (асимметрия + tail-side)"],
  },
  {
    version: "0.1.373",
    date: "2026-01-02",
    improved: ["История: максимальная ширина bubble приведена к tweb (30rem)"],
  },
  {
    version: "0.1.372",
    date: "2026-01-02",
    improved: ["История: дата‑разделители ближе к tweb (sticky и без линий)"],
  },
  {
    version: "0.1.371",
    date: "2026-01-02",
    improved: ["Чат‑лист: на desktop строки выровнены под tweb (time сверху, бейджи снизу)"],
    fixed: ["Чат‑лист: menu‑open подсветка заметнее (tweb‑like)"],
  },
  {
    version: "0.1.370",
    date: "2026-01-02",
    improved: ["Сайдбар: вкладки приведены к tweb (высота, отступы, активный индикатор)"],
  },
  {
    version: "0.1.369",
    date: "2026-01-02",
    fixed: ["Сайдбар: учтён app-gap-bottom, чтобы список не обрезался снизу в iOS/PWA"],
  },
  {
    version: "0.1.368",
    date: "2026-01-02",
    fixed: ["Шапка: на mobile убран лишний зазор под статусом (Connected)"],
  },
  {
    version: "0.1.367",
    date: "2026-01-02",
    fixed: ["Сайдбар: надёжный сброс скролла списка при открытии (iOS/WebKit)"],
  },
  {
    version: "0.1.366",
    date: "2026-01-02",
    fixed: ["PWA (desktop): вкладка «Меню» снова показывает пункт Info"],
  },
  {
    version: "0.1.365",
    date: "2026-01-02",
    added: ["Экраны: приветствие, обновление и выход (полноэкранные)"],
    improved: ["Навигация: базовый экран — вкладки Контакты/Доски/Чаты/Меню (без автооткрытия последнего чата)"],
  },
  {
    version: "0.1.364",
    date: "2026-01-02",
    improved: ["Композер: добавлена кнопка отправки (маленькая стрелка)"],
    fixed: ["Статус соединения обновляется без лишних перерисовок (меньше миганий офлайн)"],
  },
  {
    version: "0.1.363",
    date: "2026-01-02",
    fixed: ["Auth: при выходе/неавторизованном состоянии показывается только окно входа"],
  },
  {
    version: "0.1.362",
    date: "2026-01-02",
    fixed: ["Шапка: иконка меню всегда ☰ при открытии бокового списка"],
  },
  {
    version: "0.1.361",
    date: "2026-01-02",
    improved: ["Композер: ширина -16% и ниже к safe-area (mobile/PWA)"],
  },
  {
    version: "0.1.360",
    date: "2026-01-02",
    fixed: ["Mobile/PWA: убран нижний footer‑панель, экран снова полноразмерный"],
  },
  {
    version: "0.1.359",
    date: "2026-01-02",
    fixed: ["Подвал: убрана лишняя строка статуса, оставлена навигация (mobile/PWA)"],
  },
  {
    version: "0.1.358",
    date: "2026-01-02",
    improved: ["Чат: возвращён подвал главного окна (footer) на mobile/PWA"],
  },
  {
    version: "0.1.357",
    date: "2026-01-02",
    fixed: [
      "iOS/PWA: цвет status bar и маски иконки синхронизирован с фоном приложения",
      "iOS/PWA: safe-area снизу красится в цвет фона (без тёмного подвала)",
    ],
  },
  {
    version: "0.1.356",
    date: "2026-01-01",
    fixed: ["Шапка: цвет совпадает с фоном приложения (включая область с «чёлкой»)"],
  },
  {
    version: "0.1.355",
    date: "2026-01-01",
    improved: ["Скины: панели интерфейса совпадают с фоном (без «светлого окна»)"],
  },
  {
    version: "0.1.354",
    date: "2026-01-01",
    improved: ["Тема: панели интерфейса совпадают с цветом фона (один тон)"],
  },
  {
    version: "0.1.353",
    date: "2026-01-01",
    improved: ["Сайдбар: плотность строк диалогов выровнена под tweb (min-height/padding)"],
    fixed: ["Сайдбар: при возврате из чата список стартует сверху (mobile/PWA)"],
  },
  {
    version: "0.1.352",
    date: "2026-01-01",
    improved: [
      "Контакты: сортировка по последней активности (без режимов «Топ/По имени»)",
      "История: ширина пузырей привязана к контейнеру сообщений (tweb‑like)",
    ],
    fixed: [
      "Пересылка: сообщения без текста (forward‑only) отправляются корректно",
      "Сайдбар: список не обрезается снизу на mobile/PWA (safe‑area padding)",
      "Сайдбар: при возврате на главный экран список стартует с начала",
    ],
  },
  {
    version: "0.1.350",
    date: "2026-01-01",
    fixed: ["Откат: возвращено поведение до 0.1.349 (mobile footer tabs скрыты, без reset списка)"],
  },
  {
    version: "0.1.349",
    date: "2026-01-01",
    improved: ["Mobile/PWA: нижняя навигация снова видна (footer tabs, tweb/iOS‑like)", "PWA: standalone больше не скрывает footer"],
    fixed: ["Сайдбар (mobile): сброс позиции списка при смене вкладок/страниц — старт с первого элемента"],
  },
  {
    version: "0.1.348",
    date: "2026-01-01",
    improved: [
      "Сайдбар: списки чатов/контактов/досок открываются с верхней позиции при смене вкладок",
      "Сайдбар: добавлен нижний отступ для безопасной зоны (лист до конца без обрезки)",
    ],
  },
  {
    version: "0.1.347",
    date: "2026-01-01",
    improved: [
      "Контакты: при переключении вкладок список открывается с первого контакта",
      "PWA: секции списка в сайдбаре без лишней линии под табами",
    ],
  },
  {
    version: "0.1.346",
    date: "2026-01-01",
    improved: ["PWA: вкладка «Меню» показывается и в standalone режиме"],
  },
  {
    version: "0.1.345",
    date: "2026-01-01",
    improved: ["Desktop: в сайдбаре возвращена строка «Меню» для быстрого доступа"],
  },
  {
    version: "0.1.344",
    date: "2026-01-01",
    fixed: ["iOS PWA: standalone больше не подрезает шапку/подвал (корректная высота вьюпорта)"],
    improved: ["PWA: fallback для standalone‑стилей по `html.is-standalone` (без закругления/паддинга)"],
  },
  {
    version: "0.1.343",
    date: "2026-01-01",
    fixed: ["Контакты: при открытии список всегда начинается с первого элемента (без \"середины\")"],
    improved: ["Сайдбар: секции контактов отделены тонким разделителем (tweb‑like)"],
  },
  {
    version: "0.1.342",
    date: "2026-01-01",
    improved: [
      "Сайдбар: заголовки секций выровнены по тексту строк (tweb‑like)",
      "PWA: шапка компактнее в standalone (без меток/хоткеев)",
    ],
  },
  {
    version: "0.1.341",
    date: "2026-01-01",
    improved: ["PWA: tabs перенесены под шапку и закреплены при скролле (tweb‑like)"],
  },
  {
    version: "0.1.340",
    date: "2026-01-01",
    improved: [
      "PWA: сохранение позиции списка при переключении вкладок",
      "Контакты: единый список без секций Online/Offline (сортировка по статусу)",
    ],
    fixed: ["PWA: скрыт глобальный footer в standalone режиме"],
  },
  {
    version: "0.1.338",
    date: "2026-01-01",
    fixed: ["Mobile: скрыта лупа поиска в шапке чата", "Mobile: список контактов ближе к шапке (без лишнего отступа)"],
  },
  {
    version: "0.1.337",
    date: "2025-12-31",
    fixed: ["Desktop: кнопка поиска в шапке не дёргается при клике"],
  },
  {
    version: "0.1.336",
    date: "2025-12-31",
    improved: ["Desktop: вкладка «Меню» в сайдбаре (tweb‑like)"],
  },
  {
    version: "0.1.335",
    date: "2025-12-31",
    improved: ["Mobile: первый блок списка контактов без верхнего отступа (впритык к верху)"],
    fixed: ["Footer: статусы онлайн/оффлайн/ожидают скрыты при отсутствии онлайн"],
  },
  {
    version: "0.1.334",
    date: "2025-12-31",
    improved: ["Mobile: вкладки перенесены наверх (tweb‑like)"],
  },
  {
    version: "0.1.333",
    date: "2025-12-31",
    fixed: ["Desktop: ширина истории чата ближе к tweb (контейнер 728px без лишнего сжатия)"],
  },
  {
    version: "0.1.332",
    date: "2025-12-31",
    fixed: [
      "Mobile: safe-area низ совпадает с сайдбаром при открытом списке",
      "Mobile: список контактов без верхнего padding под шапкой",
      "Сайдбар: убрана лупа из поля поиска",
    ],
  },
  {
    version: "0.1.331",
    date: "2025-12-31",
    improved: ["Контакты: убраны лишние заголовки Online/Offline/Нет без активных онлайн"],
    fixed: ["Mobile: список контактов поднят под статус (минимальные отступы)"],
  },
  {
    version: "0.1.330",
    date: "2025-12-31",
    improved: ["Mobile: список контактов/чатов без верхней плашки (впритык к верху, tweb‑like)"],
    fixed: ["Header: лупа поиска убрана из шапки"],
  },
  {
    version: "0.1.329",
    date: "2025-12-31",
    improved: ["Чаты: радиусы склеенных пузырьков ближе к tweb"],
    fixed: ["Mobile: убрана дублирующая кнопка «назад» в шапке сайдбара", "Header: поиск в чате не дёргается на right-click"],
  },
  {
    version: "0.1.328",
    date: "2025-12-31",
    improved: ["Сайдбар: ширина берётся из JS‑clamp (без CSS‑clamp), parity с tweb"],
  },
  {
    version: "0.1.327",
    date: "2025-12-31",
    improved: [
      "Чаты: mobile max‑width сообщений и боковые кнопки — токены как в tweb",
      "Чаты: фон времени сообщения приведён к tweb",
    ],
  },
  {
    version: "0.1.326",
    date: "2025-12-31",
    improved: ["Чаты: last-read обновляется по видимым сообщениям (не только внизу)"],
    fixed: ["Чаты: unread-разделитель исчезает после чтения (по видимой зоне)"],
  },
  {
    version: "0.1.325",
    date: "2025-12-31",
    fixed: ["Чаты: подгрузка истории удерживает позицию и не прыгает"],
  },
  {
    version: "0.1.324",
    date: "2025-12-31",
    improved: ["Авторизация: фон и safe-area используют --surface-color (tweb parity)"],
  },
  {
    version: "0.1.323",
    date: "2025-12-31",
    improved: ["Сайдбар: на mobile активная строка без подсветки (tweb parity)"],
  },
  {
    version: "0.1.322",
    date: "2025-12-31",
    improved: ["Сайдбар: высота и вертикальные отступы строк диалогов как в tweb"],
  },
  {
    version: "0.1.321",
    date: "2025-12-31",
    improved: ["Сайдбар: заголовок строки 500 weight как в tweb"],
  },
  {
    version: "0.1.320",
    date: "2025-12-31",
    improved: ["Сайдбар: подписи строк чатов/контактов 12px (tweb parity)"],
  },
  {
    version: "0.1.319",
    date: "2025-12-31",
    improved: ["Чаты: selection overlay по размерам/типографике ближе к tweb (ширина, счётчик, кнопки)"],
  },
  {
    version: "0.1.318",
    date: "2025-12-31",
    improved: ["Медиа: фон viewer выровнен под tweb (desktop rgba(0,0,0,.88), mobile #000)"],
  },
  {
    version: "0.1.317",
    date: "2025-12-31",
    improved: ["Чаты: long-press на touch включает выбор сообщений (selection overlay)"],
  },
  {
    version: "0.1.316",
    date: "2025-12-31",
    improved: ["Чаты: selection overlay — выбор сообщений + панель со счётчиком и отменой (MVP)"],
  },
  {
    version: "0.1.315",
    date: "2025-12-31",
    improved: ["Чаты: подготовка selection overlay (состояние + место в лейауте)"],
  },
  {
    version: "0.1.314",
    date: "2025-12-31",
    improved: ["Чаты: свайп вправо для reply на touch + визуальная индикация (tweb parity)"],
  },
  {
    version: "0.1.313",
    date: "2025-12-31",
    improved: ["Чаты: reply по double-click на desktop (tweb parity)"],
  },
  {
    version: "0.1.312",
    date: "2025-12-31",
    improved: ["Чаты: reply/forward превью показывает скрытый профиль, бот-подпись и автора поста (tweb parity, best-effort)"],
  },
  {
    version: "0.1.311",
    date: "2025-12-31",
    improved: ["Чаты: reply/forward превью показывает 32px мини‑превью для вложений (tweb parity, best‑effort)"],
  },
  {
    version: "0.1.310",
    date: "2025-12-31",
    improved: ["Чаты: reply‑превью в сообщениях оформлено как цитата с emoji‑pattern (tweb parity, best‑effort)"],
  },
  {
    version: "0.1.309",
    date: "2025-12-31",
    improved: ["Чаты: заголовок пересланного сообщения теперь с аватаром отправителя (tweb parity, best-effort)"],
  },
  {
    version: "0.1.308",
    date: "2025-12-31",
    improved: ["Чаты: панель ответа/пересылки в композере + превью ответа/пересылки в сообщениях (best-effort)"],
  },
  {
    version: "0.1.307",
    date: "2025-12-31",
    improved: ["Сайдбар: подсветка строки при открытом контекст‑меню (menu‑open, tweb parity)"],
  },
  {
    version: "0.1.306",
    date: "2025-12-31",
    improved: ["Сайдбар: бейдж реакций в чатах (best‑effort для сообщений с реакциями)"],
  },
  {
    version: "0.1.305",
    date: "2025-12-30",
    improved: ["Сайдбар: бейдж «закреплено» и порядок бейджей (упоминание/непрочитано/закреп) как в tweb"],
  },
  {
    version: "0.1.304",
    date: "2025-12-30",
    improved: ["Сайдбар: collapsed список edge‑to‑edge (padding 0) как в tweb"],
  },
  {
    version: "0.1.303",
    date: "2025-12-30",
    improved: ["Сайдбар: внешние отступы списка чатов как в tweb (desktop 8px, mobile 0)"],
  },
  {
    version: "0.1.302",
    date: "2025-12-30",
    improved: ["Поиск в чате: inline список результатов (tweb‑like)"],
  },
  {
    version: "0.1.301",
    date: "2025-12-30",
    improved: ["Поиск в чате: футер со счётчиком, переходом по датам и навигацией (tweb‑like)"],
  },
  {
    version: "0.1.300",
    date: "2025-12-30",
    improved: ["Контакты: добавлен режим сортировки «Топ» (server top_peers)"],
  },
  {
    version: "0.1.299",
    date: "2025-12-30",
    improved: ["Sidebar: бейджи и время в строках выровнены под tweb (время сверху, бейджи одной строкой снизу)"],
  },
  {
    version: "0.1.298",
    date: "2025-12-30",
    improved: ["Sidebar: активная строка на desktop инвертируется (primary фон + белые тексты/бейджи)"],
  },
  {
    version: "0.1.297",
    date: "2025-12-30",
    improved: ["Sidebar: collapsed width 80px + список в collapsed выровнен под tweb"],
  },
  {
    version: "0.1.296",
    date: "2025-12-30",
    improved: ["Auth: фон страницы входа/регистрации как в tweb (body/html.has-auth-pages)"],
  },
  {
    version: "0.1.295",
    date: "2025-12-30",
    improved: ["Поиск: стиль кнопок «Показать», отступы People/Recent и пустые состояния под tweb"],
  },
  {
    version: "0.1.294",
    date: "2025-12-30",
    improved: ["Поиск: группировка результатов и отступы секций под tweb"],
  },
  {
    version: "0.1.293",
    date: "2025-12-30",
    improved: ["Поиск: плотность/отступы списка истории и заголовков под tweb"],
  },
  {
    version: "0.1.292",
    date: "2025-12-30",
    improved: ["Поиск: виртуализация списка истории (windowing) в глобальном поиске"],
  },
  {
    version: "0.1.291",
    date: "2025-12-30",
    improved: ["Поиск: история подгружается порциями (кнопка «Показать ещё» + автоподгрузка при скролле)"],
  },
  {
    version: "0.1.290",
    date: "2025-12-30",
    improved: ["Поиск: история показывает первые сообщения с «Показать все», добавлена пересылка сообщений (best-effort)"],
  },
  {
    version: "0.1.289",
    date: "2025-12-30",
    improved: ["Контакты: переключатель сортировки (по активности/по имени) + сохранение выбора"],
  },
  {
    version: "0.1.288",
    date: "2025-12-30",
    improved: ["Поиск: пересылка ID из server‑results (best‑effort, в поле ввода/буфер)"],
  },
  {
    version: "0.1.287",
    date: "2025-12-30",
    improved: ["Поиск: фильтр по дате для истории сообщений (local)"],
  },
  {
    version: "0.1.286",
    date: "2025-12-30",
    improved: ["Поиск: выбор серверных результатов (DM/группы/доски) + групповые действия"],
  },
  {
    version: "0.1.285",
    date: "2025-12-30",
    improved: ["Поиск: выбор сообщений в истории + удаление (локально/для всех)"],
  },
  {
    version: "0.1.284",
    date: "2025-12-30",
    improved: ["Поиск: таб‑бар с вкладками чатов/каналов и типов истории (tweb‑like)"],
  },
  {
    version: "0.1.283",
    date: "2025-12-30",
    improved: ["Поиск: вкладки Музыка/Голос в глобальном поиске (best-effort)"],
  },
  {
    version: "0.1.282",
    date: "2025-12-30",
    improved: ["Поиск в чате: фильтр from:/# (topbar search, локальная история)"],
  },
  {
    version: "0.1.281",
    date: "2025-12-30",
    improved: ["Поиск: фильтр по отправителю/хэштегам (from:/#) в локальной истории"],
  },
  {
    version: "0.1.280",
    date: "2025-12-30",
    improved: ["Контакты: сортировка по last_seen (online-first, tweb parity)"],
  },
  {
    version: "0.1.279",
    date: "2025-12-30",
    improved: ["Сайдбар: unread для групп/досок (best-effort) + сортировка учитывает unread"],
  },
  {
    version: "0.1.278",
    date: "2025-12-30",
    improved: ["Сайдбар: row‑grid на desktop с колонкой 56px под аватар (tweb parity)"],
  },
  {
    version: "0.1.277",
    date: "2025-12-30",
    improved: ["Right sidebar: overlay поведение на floating ширинах (601–925)"],
  },
  {
    version: "0.1.276",
    date: "2025-12-30",
    improved: ["Right sidebar: инфо‑панель чата в правой колонке на desktop (ℹ︎ toggle, close/Esc)"],
  },
  {
    version: "0.1.275",
    date: "2025-12-30",
    improved: ["Layout: заготовка right-sidebar и ширины под tweb (токены + grid)"],
  },
  {
    version: "0.1.274",
    date: "2025-12-30",
    improved: ["История: ширина контейнера пузырей по формуле tweb (учёт chat pad)"],
  },
  {
    version: "0.1.273",
    date: "2025-12-30",
    improved: ["Компоузер: базовая тень поля ввода как в tweb (сохраняется при фокусе/drag)"],
  },
  {
    version: "0.1.272",
    date: "2025-12-30",
    improved: ["Viewer: навигация по медиа с клавиатуры (←/→)"],
  },
  {
    version: "0.1.271",
    date: "2025-12-30",
    improved: ["Viewer: навигация по медиа (пред/след) в рамках чата"],
  },
  {
    version: "0.1.270",
    date: "2025-12-30",
    improved: ["Файлы: просмотрщик отображает подпись к вложениям (caption)"],
  },
  {
    version: "0.1.269",
    date: "2025-12-30",
    improved: ["Сайдбар: компактные строки (row-small) для списка с avatar-compact"],
  },
  {
    version: "0.1.268",
    date: "2025-12-30",
    improved: ["Layout: body background token для html/body (tweb parity)"],
  },
  {
    version: "0.1.267",
    date: "2025-12-30",
    improved: ["Компоузер: радиус ввода 1rem (tweb parity)"],
  },
  {
    version: "0.1.266",
    date: "2025-12-30",
    improved: ["Лейаут: брейкпоинты 1276/1681 и max-width 1680px на ultra-wide (tweb parity)"],
  },
  {
    version: "0.1.265",
    date: "2025-12-30",
    improved: ["Чат: фильтры поиска (Все/Медиа/Файлы/Ссылки/Аудио) в строке поиска чата"],
  },
  {
    version: "0.1.264",
    date: "2025-12-30",
    improved: ["Поиск: фильтры истории (Все/Медиа/Файлы/Ссылки/Аудио) для локальных результатов"],
  },
  {
    version: "0.1.263",
    date: "2025-12-30",
    improved: ["Чат: кнопка «Вниз» показывает непрочитанные в комнатах (группы/доски) по lastRead (best-effort)"],
  },
  {
    version: "0.1.262",
    date: "2025-12-30",
    improved: ["Чаты: активная строка на desktop инвертирует подзаголовок/время/иконки (tweb-style)"],
  },
  {
    version: "0.1.261",
    date: "2025-12-30",
    improved: ["Чат: кнопка «Вниз» показывает счётчик непрочитанных (DM) в стиле tweb"],
  },
  {
    version: "0.1.260",
    date: "2025-12-30",
    improved: ["История: разделитель «Непрочитанные» в стиле tweb (полная ширина, 30px/15px)"],
  },
  {
    version: "0.1.259",
    date: "2025-12-30",
    improved: ["История: server-side «Непрочитанные» в группах/досках (sync между устройствами)"],
  },
  {
    version: "0.1.258",
    date: "2025-12-30",
    improved: ["История: «Непрочитанные» в группах/досках (best-effort, локальные маркеры)"],
  },
  {
    version: "0.1.257",
    date: "2025-12-30",
    improved: ["История: липкие разделители дат + «Непрочитанные» в ЛС"],
  },
  {
    version: "0.1.256",
    date: "2025-12-30",
    improved: ["Чаты: бейджи chatlist появляются с tweb‑подобной анимацией"],
  },
  {
    version: "0.1.255",
    date: "2025-12-30",
    improved: ["Чаты: muted чаты приглушают unread/mention бейджи в списке"],
  },
  {
    version: "0.1.254",
    date: "2025-12-29",
    improved: ["Чаты: индикатор mute для чатов/досок (best-effort по списку muted)"],
  },
  {
    version: "0.1.253",
    date: "2025-12-29",
    improved: ["Чаты: индикатор упоминаний @handle в списке (best-effort по последнему сообщению)"],
  },
  {
    version: "0.1.252",
    date: "2025-12-29",
    improved: ["Чаты: сортировка диалогов учитывает упоминания @handle (best-effort по последнему сообщению)"],
  },
  {
    version: "0.1.251",
    date: "2025-12-29",
    improved: ["Чаты: сортировка диалогов учитывает черновики/непрочитанные/attention (tweb priority)"],
  },
  {
    version: "0.1.250",
    date: "2025-12-29",
    improved: ["Сайдбар: заголовок 56px с padding 16/8 и границей при прокрутке (tweb parity)"],
  },
  {
    version: "0.1.249",
    date: "2025-12-29",
    improved: ["Контакты: аватары 42px (abitbigger) как в tweb (не влияет на чаты)"],
  },
  {
    version: "0.1.248",
    date: "2025-12-29",
    improved: [
      "Сайдбар: аватары 54px (32px в collapsed), online‑dot 14px, бейджи 22px; выделение и hover ближе к tweb",
    ],
  },
  {
    version: "0.1.247",
    date: "2025-12-29",
    improved: [
      "Типографика: добавлены tweb‑токены размеров/line-height и Numbers Rounded; цифровые метки используют округлые цифры",
    ],
  },
  {
    version: "0.1.246",
    date: "2025-12-29",
    improved: ["История: добавлено окно виртуализации (уменьшен DOM при длинной истории)"],
  },
  {
    version: "0.1.245",
    date: "2025-12-29",
    improved: ["История: убрана кнопка «Показать предыдущие» (осталась автоподгрузка при прокрутке вверх)"],
  },
  {
    version: "0.1.244",
    date: "2025-12-29",
    improved: ["Сайдбар: floating-режим закрытого состояния как в tweb (смещение -5rem, без полного скрытия)"],
  },
  {
    version: "0.1.243",
    date: "2025-12-29",
    improved: ["Сайдбар: floating-режим сдвига чата синхронизирован с tweb (+1px под границу)"],
  },
  {
    version: "0.1.242",
    date: "2025-12-29",
    improved: ["Сообщения: размеры пузырей приведены к tweb (ширина 85%/100%-89px, padding 4/8/5, radius 15px)"],
  },
  {
    version: "0.1.241",
    date: "2025-12-29",
    improved: [
      "Чат: отступы приведены к tweb (13px desktop / 8px mobile)",
      "Компоузер: высота 54px (desktop) / 46px (mobile) и внутренние паддинги 8px/4px",
    ],
  },
  {
    version: "0.1.240",
    date: "2025-12-29",
    improved: ["Sidebar: строки списка приведены к tweb (высота 56px, паддинги 7/16, аватар 40px)"],
  },
  {
    version: "0.1.239",
    date: "2025-12-29",
    improved: ["Типографика: базовый шрифт Roboto, размер 16px и line-height 1.3125 (tweb parity)"],
    fixed: ["Mobile: базовый размер шрифта синхронизирован с десктопом (16px)"],
  },
  {
    version: "0.1.238",
    date: "2025-12-29",
    improved: [
      "Лейаут: брейкпоинты приведены к tweb (mobile <= 600px, floating sidebar 601–925px)",
      "Навигация: плавающий сайдбар открывается поверх чата с затемнением и сдвигом колонки",
    ],
    fixed: ["Mobile: стили и тесты синхронизированы с новым порогом 600px"],
  },
  {
    version: "0.1.237",
    date: "2025-12-29",
    improved: [
      "Чат: лента сообщений и композер теперь ограничены шириной 728px и центрированы (tweb parity), чтобы диалоги выглядели плотнее",
      "Сообщения: режимы plain/compact теперь следуют общей ширине контейнера",
    ],
  },
  {
    version: "0.1.236",
    date: "2025-12-29",
    improved: [
      "Sidebar (desktop): ширина теперь резайзится и сохраняется (tweb‑пределы 308–420px), при сильном сжатии — компактный режим (80px)",
    ],
  },
  {
    version: "0.1.235",
    date: "2025-12-29",
    fixed: [
      "iOS/Safari: safe-area по бокам теперь задаётся на `html` (tweb parity), убраны дублирующие отступы в header/sidebar/chat/composer/footer — меньше «двойных» полей в landscape",
    ],
  },
  {
    version: "0.1.234",
    date: "2025-12-29",
    fixed: ["iOS/Safari: `--vh` теперь следует layout viewport (tweb parity) когда клавиатура скрыта — меньше ложных «усадок» интерфейса при небольшой разнице visualViewport"],
  },
  {
    version: "0.1.233",
    date: "2025-12-28",
    fixed: ["Доски (mobile): в редакторе при длинных черновиках скрепка/✏️ больше не «уезжают вниз» — кнопки закреплены сверху, а прокрутка текста держится у курсора"],
    improved: ["Компоузер: при достижении max-height внутренняя прокрутка остаётся у конца текста во время набора — меньше шансов на «кривую» автопрокрутку/подскролл страницы"],
  },
  {
    version: "0.1.232",
    date: "2025-12-28",
    fixed: ["Доски (mobile): длинный текст в редакторе больше не уводит скрепку/✏️ за пределы экрана — композер компактнее, а прокрутка текста работает пальцем"],
    improved: ["Доски (mobile): max-height композера/предпросмотра привязан к `--app-vh` — меньше шанс клипа под iOS клавиатурой/браузерной панелью"],
  },
  {
    version: "0.1.231",
    date: "2025-12-28",
    fixed: ["Чат: после отправки файла история прокручивается к последнему сообщению (пин к низу как при обычной отправке)"],
  },
  {
    version: "0.1.230",
    date: "2025-12-28",
    improved: [
      "Доски: ✏️ редактора новости теперь рядом со скрепкой (и на desktop тоже) — меньше хаоса в композере",
      "Доски: кнопка «Скачать» на медиа‑посте перенесена в верхний угол (не перекрывает подпись)",
    ],
    fixed: ["Доски: предпросмотр в редакторе держится у низа при наборе текста (когда курсор в конце) — проще дописывать длинные новости"],
  },
  {
    version: "0.1.229",
    date: "2025-12-28",
    improved: [
      "Шапка (mobile): поиск в чате — аккуратная иконка (лупа/крест) вместо длинной кнопки",
      "Доски: порядок кнопок в композере — Файл → Эмодзи → ✏️ (desktop); на mobile эмодзи скрыты и ✏️ рядом со скрепкой",
      "Доски: при открытой клавиатуре предпросмотр остаётся видимым (планирование скрыто), высота предпросмотра уменьшена",
    ],
    fixed: [
      "iOS/Safari: при фокусе на композере временно отключаем остальные поля ввода — меньше шанс системной панели prev/next/✓",
      "Чат: pinned-bottom больше не «срывается» из-за resize/media-load — выключается только после жеста прокрутки пользователя",
      "Доски: подпись/мета у медиа‑поста имеют обычные отступы (Telegram-like) — меньше «топорности»",
      "Медиа: кнопка скачивания поверх фото/видео теперь всегда компактная (иконка)",
    ],
  },
  {
    version: "0.1.228",
    date: "2025-12-28",
    improved: [
      "Файлы: кнопка «Скачать» в истории теперь всегда использует внутреннюю логику (кэш → stream → file_get) — медиа чаще доступно из кэша",
      "Компоузер: при наборе текста добавлена «оживляющая» подсветка рамки даже на WebKit без mask-composite (fallback анимация)",
    ],
    fixed: [
      "Чат: при скачивании сначала пробуем CacheStorage, даже если уже есть URL — повторные открытия/скачивания стабильнее",
      "Доски: подпись+мета у медиа-поста больше не выглядят как отдельная панель — все на одной поверхности пузыря (Telegram-like)",
    ],
  },
  {
    version: "0.1.227",
    date: "2025-12-28",
    improved: ["Шапка (mobile): поиск в чате теперь выглядит аккуратнее (круглая кнопка без тяжёлого фона, иконка чуть крупнее)"],
    fixed: [
      "Чат: автоскролл до низа включается сразу при открытии чата (без ожидания historyLoaded) — последнее медиа/файл больше не «съедает» низ на iOS/WebKit",
      "Доски: медиа-посты (фото/видео + подпись) выглядят цельнее — медиа edge-to-edge, подпись+мета как нижняя секция карточки",
    ],
  },
  {
    version: "0.1.226",
    date: "2025-12-28",
    improved: ["Навигация: при входе автоматически открывается последний активный чат/доска (как в Telegram) — меньше «пустоты»"],
  },
  {
    version: "0.1.225",
    date: "2025-12-28",
    improved: ["Файлы: автопрефетч кэша для истории теперь включает video/audio (до 6MB) — меньше плейсхолдеров в ленте сообщений"],
    fixed: ["Медиа: кнопка «Скачать» на фото/видео на touch стала компактнее (иконка вместо текста), добавлен aria-label для ссылки"],
  },
  {
    version: "0.1.224",
    date: "2025-12-28",
    fixed: ["Чат: pinned-bottom на resize/media-load и кнопка «Вниз» используют maxScrollTop (scrollHeight - clientHeight) — меньше «не в самом низу»"],
  },
  {
    version: "0.1.223",
    date: "2025-12-27",
    fixed: [
      "Чат: pinned-bottom/автоскролл используют точный maxScrollTop (scrollHeight - clientHeight) — стабильнее, когда последнее сообщение медиа/файл",
      "Файлы: видео-файлы по расширению (.avi/.3gp/.3g2) теперь открываются как video (preview + viewer)",
    ],
  },
  {
    version: "0.1.222",
    date: "2025-12-27",
    improved: ["Шапка: кнопка поиска в чате на mobile теперь визуально согласована с остальными кнопками (фон/рамка/радиус)"],
    fixed: [
      "Доски: медиа-посты (фото/видео + подпись) выглядят цельнее (ширина, отступы подписи/меты, позиция кнопок)",
      "Доски: предпросмотр в редакторе новостей лучше прокручивается на touch и надёжнее держится у нижней границы при вводе",
    ],
  },
  {
    version: "0.1.221",
    date: "2025-12-27",
    fixed: ["Mobile: при повторном выборе текущего чата pinned-bottom восстанавливается корректнее (в т.ч. когда последнее сообщение — медиа/файл)"],
  },
  {
    version: "0.1.220",
    date: "2025-12-27",
    improved: ["Доски: подписи к фото/видео/файлам рендерятся как пост (форматирование/стиль новостей)"],
    fixed: ["Чат: pinned-bottom учитывает audio `loadedmetadata` (меньше шансов “не внизу” после догрузки)"],
  },
  {
    version: "0.1.219",
    date: "2025-12-27",
    improved: [
      "Шапка: иконка поиска в чате теперь аккуратная (SVG mask), на mobile hit-area 44px",
      "Доски: ✏️ редактора новости — одна кнопка в строке ввода рядом со скрепкой (и только в Досках)",
      "Медиа: подпись под фото/видео отделена тонкой линией — выглядит цельнее",
    ],
    fixed: [
      "Доски: предпросмотр в редакторе сохраняет позицию скролла и нормально прокручивается вниз",
      "Чат: pinned-to-bottom устойчивее при загрузке фото/видео (доп. фиксация на load/loadedmetadata)",
    ],
  },
  {
    version: "0.1.218",
    date: "2025-12-27",
    improved: ["iOS/Safari: при наборе текста отключаем лишние поля ввода (поиск/планирование), чтобы не появлялась панель prev/next/✓"],
  },
  {
    version: "0.1.217",
    date: "2025-12-27",
    improved: ["Boards/Desktop: кнопка ✏️ редактора новости теперь стоит рядом со скрепкой (до кнопки эмодзи)"],
  },
  {
    version: "0.1.216",
    date: "2025-12-27",
    fixed: ["iOS/Safari: long‑press по тексту сообщения больше не показывает системное меню (Copy/Translate) — используем только наше контекст‑меню"],
  },
  {
    version: "0.1.215",
    date: "2025-12-27",
    improved: [
      "Файлы: предпросмотр видео/аудио в истории (видео — preview, аудио — встроенный player после загрузки)",
      "Файлы: viewer теперь открывает видео/аудио (не только изображения)",
      "Кэш: viewer сначала берёт файл из CacheStorage (без повторного скачивания), warmup восстанавливает media-URL из кэша (с лимитом по размеру)",
      "Композер: при наборе текста появляется тонкая «живая» переливающаяся рамка",
    ],
  },
  {
    version: "0.1.214",
    date: "2025-12-27",
    fixed: ["Mobile/Boards: кнопка ✏️ (редактор новости) перенесена в строку ввода рядом со скрепкой (вместо отдельной кнопки)"],
  },
  {
    version: "0.1.213",
    date: "2025-12-27",
    improved: ["Уведомления: стабильные `tag` для in-app Notification (группировка как в Telegram) + silent=true (звук управляется тумблером)"],
  },
  {
    version: "0.1.212",
    date: "2025-12-27",
    improved: ["iOS: при открытой клавиатуре планирование (datetime) отключается — меньше шансов на панель prev/next/✓"],
  },
  {
    version: "0.1.211",
    date: "2025-12-27",
    improved: ["iPhone/iOS: редактор Досок становится компактнее при открытой клавиатуре (больше места для ввода)"],
  },
  {
    version: "0.1.210",
    date: "2025-12-27",
    fixed: ["UI: кнопка ✏️ (редактор Досок) теперь корректно скрывается вне Досок (чат/ЛС)"],
  },
  {
    version: "0.1.209",
    date: "2025-12-27",
    fixed: ["Контекст-меню: убран значок ✏️ в чатах (DM/группы); оставлен только на Досках"],
  },
  {
    version: "0.1.208",
    date: "2025-12-26",
    improved: [
      "Композер: убрана кнопка «Отправить» — отправка в чатах по Enter (как на телефоне)",
      "Доски: публикация теперь через кнопку «Опубликовать» внутри редактора (Ctrl+Enter тоже работает)",
      "Mobile: в строке ввода осталась только кнопка «Файл»; редактор Досок открывается отдельной кнопкой над полем",
      "Доски: карточки объявлений получили стиль «прибито гвоздями» по бокам",
    ],
  },
  {
    version: "0.1.207",
    date: "2025-12-26",
    improved: [
      "Desktop: сайдбар больше не «перемешивает» Контакты/Доски/Чаты — вкладки теперь переключают отдельные списки",
      "PWA (desktop): вкладка «Меню» скрыта (на desktop навигация уже есть в шапке/футере)",
      "Сайдбар: вкладки оформлены как сегментированный переключатель (чётче и аккуратнее)",
    ],
  },
  {
    version: "0.1.206",
    date: "2025-12-26",
    added: ["Реакции: одна реакция на сообщение/пост (счётчики + подсветка вашей реакции) — как в Telegram"],
    improved: ["Реакции: тонкая панель эмодзи в контекст‑меню сообщения (ПКМ / долгий тап)"],
    fixed: ["История: реакции сохраняются и отображаются после перезагрузки/синхронизации"],
    notes: ["Можно нажимать на реакцию под сообщением: повторный тап снимает реакцию."],
  },
  {
    version: "0.1.205",
    date: "2025-12-26",
    improved: [
      "Доски: кнопки секций в редакторе стали компактнее — палитра «##» по цветам (без длинных слов)",
      "PWA: вкладки сайдбара (Контакты/Доски/Чаты/Меню) теперь разделяют списки как на мобильной версии; сортировка по времени последнего сообщения",
      "PWA: кнопка отправки стала спокойнее (маленький прямоугольник без иконки)",
      "Mobile browser: скрыты лишние кнопки в композере (эмодзи/отправка) — отправка через Enter, публикация на Доске через кнопку",
      "Контекст-меню (bottom-sheet): компактнее без изменения размера шрифта",
    ],
    fixed: [
      "Доски: поддержка разметки секций с произвольным заголовком через маркеры `##+` / `##^` / `##!` / `##?`",
      "Чат: убрана лишняя кнопка ✎ в шапке Доски (остался редактор в композере)",
      "Сообщения с файлами/фото: добавлена тонкая обводка, чтобы блок выглядел единым сообщением",
    ],
  },
  {
    version: "0.1.204",
    date: "2025-12-26",
    improved: [
      "Доски: планирование — подсветка некорректной даты/времени + индикатор «ещё N» в списке запланированных",
      "Доски: подсказка планировщика уточняет локальное время и best‑effort поведение",
    ],
    fixed: ["Доски: предпросмотр в редакторе обновляется сразу после публикации/планирования и после завершения редактирования сообщения"],
  },
  {
    version: "0.1.203",
    date: "2025-12-26",
    added: [
      "Доски: встроенный редактор новости в поле ввода (toolbar + предпросмотр) — без отдельного модального окна",
      "Доски: планирование публикации (до 7 дней) + список запланированных + отмена",
    ],
    improved: ["Доски: разметка `## Добавлено/Улучшено/Исправлено/Примечания` теперь отображается как changelog‑блоки (как в Info → История изменений)"],
    notes: ["Планирование best‑effort: отправка произойдёт, пока приложение открыто (или при следующем запуске, если время уже наступило)."],
  },
  {
    version: "0.1.202",
    date: "2025-12-26",
    improved: ["Mobile sidebar: свайп стал плавным — при перетаскивании список «тянется», затем безшовно анимируется в следующую вкладку"],
    notes: ["Если включено «уменьшение движения» (prefers-reduced-motion), анимация отключается."],
  },
  {
    version: "0.1.201",
    date: "2025-12-26",
    improved: ["Mobile sidebar: свайп влево/вправо по списку переключает вкладки (Контакты/Доски/Чаты/Меню) — как в Telegram"],
    notes: ["На iOS/Safari системный свайп «назад» от края экрана не переопределяется."],
  },
  {
    version: "0.1.200",
    date: "2025-12-26",
    added: ["Профиль: тумблеры уведомлений — «в приложении» и «звук» (сохраняются в браузере)"],
    improved: [
      "Уведомления: заголовки/текст стали понятнее (кто/где) — ближе к Telegram‑логике",
      "Mobile sidebar: повторный тап по активной вкладке прокручивает список вверх (Telegram‑паттерн)",
    ],
    fixed: ["PWA: Service Worker best‑effort уважает режим «без звука» через `silent` (если поддерживается браузером)"],
  },
  {
    version: "0.1.199",
    date: "2025-12-26",
    fixed: ["PWA: исправлена сборка Service Worker (deep-link из уведомления теперь работает в production)"],
  },
  {
    version: "0.1.198",
    date: "2025-12-26",
    fixed: [
      "Mobile: убран «пустой экран» — если чат не выбран, основной экран это список (4 вкладки)",
      "Mobile: после «Выхода» сразу открывается окно входа/регистрации",
      "Chat: при закрытии списка сохраняем pinned-bottom (если пользователь был у конца истории)",
      "Windows: цифры/текст больше не рендерятся как emoji в сообщениях/поле ввода",
      "PWA: клик по push‑уведомлению открывает нужный чат даже при закрытом приложении (deep-link)",
    ],
  },
  {
    version: "0.1.197",
    date: "2025-12-26",
    fixed: ["Аккаунт: после «Выхода» больше не нужен ручной refresh — соединение переподключается автоматически, можно сразу нажать «Войти»"],
  },
  {
    version: "0.1.196",
    date: "2025-12-26",
    added: ["Доски: владелец может публиковать посты через кнопку ✎ (редактор с базовым форматированием)"],
    improved: [
      "Поиск: устойчивый поиск по @логину (нормализация, защита от устаревших результатов, поддержка «не той раскладки» для @)",
      "Dev: локальный Vite без make подключается к WS gateway на текущем host:8787 (удобнее для проверки с телефона по LAN)",
      "Доски: отображение сообщений оформлено как news‑feed (карточки, ширина, вложения во всю карточку)",
    ],
    fixed: ["Типографика: цифры приведены к tabular/lining (меньше «прыжков» ширины времени/ID)"],
  },
  {
    version: "0.1.195",
    date: "2025-12-26",
    improved: [
      "Контекст-меню контакта: добавлен пункт «Профиль»",
      "Mobile: вкладка «Чаты» теперь показывает активные ЛС + группы; «Контакты» — полный список пользователей",
      "Main: composer скрыт, пока не выбран чат/контакт/доска (без пустого «окна чата» при входе)",
    ],
    fixed: [
      "Mobile: открытие контекст-меню (ПКМ/долгий тап) больше не закрывает sidebar и не «прыгает» в пустой чат",
      "iOS/Safari: `--app-vh` чаще берём по `visualViewport.height` (>=2px разницы) — меньше шанс обрезанного низа под браузерной панелью",
    ],
  },
  {
    version: "0.1.194",
    date: "2025-12-26",
    fixed: [
      "Linux PWA: загрузка аватара больше не отваливается при неверном mime (например, `application/octet-stream`) — принимаем по расширению файла",
      "Аватары: удаление/очистка теперь работает корректно при `avatar_mime=null` (rev может быть >0) — старый кэш очищается сразу, без лишних `avatar_get`",
      "PWA: авто‑обновление больше не выглядит как «перезагрузка по ПКМ» — любые клики/контекстное меню считаются активностью пользователя",
    ],
  },
  {
    version: "0.1.193",
    date: "2025-12-26",
    fixed: ["Аватары: кэш больше не ломается при ошибках localStorage (quota/private mode) — используем in‑memory fallback вместо падения"],
    improved: ["Загрузка аватара: добавлен decode fallback через `createImageBitmap` (лучше работает с HEIC/нестандартными форматами)"],
  },
  {
    version: "0.1.192",
    date: "2025-12-26",
    fixed: [
      "Mobile: список в сайдбаре меньше «скачет» при перерендере/переключении вкладок — сохраняем позицию прокрутки по «якорю» строки",
      "iOS клавиатура: fallback-детект по разнице `innerHeight` vs last stable (если `visualViewport` не даёт надёжной дельты) — меньше пустого отступа над клавиатурой",
    ],
    improved: ["Touch UI: подсказка про Shift+Enter скрыта на тач‑устройствах (мобилки/планшеты)"],
  },
  {
    version: "0.1.191",
    date: "2025-12-26",
    fixed: [
      "iOS клавиатура: safe-area снизу принудительно = 0 при крупном `visualViewport` сдвиге (даже если activeElement ещё не input) — меньше пустой полосы над клавиатурой",
    ],
  },
  {
    version: "0.1.190",
    date: "2025-12-26",
    fixed: [
      "iOS/Safari: если `visualViewport.height` заметно меньше `innerHeight`, используем его для `--app-vh` (меньше шансов на обрезанный низ под браузерной панелью)",
    ],
    improved: [
      "Mobile: список чатов/контактов стал «жёстче» — строки теперь в grid-раскладке (аватар/текст/мета), время и unread не «прыгают»",
      "Mobile: keyboard-only блок «Горячие клавиши» в Info дополнительно скрыт через CSS для taч-устройств",
    ],
  },
  {
    version: "0.1.189",
    date: "2025-12-26",
    improved: [
      "Mobile: шапка более «telegram/tweb-like» — заголовок сверху, статус отдельной строкой (меньше визуального шума)",
      "Mobile: нижняя панель вкладок в сайдбаре стала более «жёсткой» (фон/рамка/разделитель)",
    ],
  },
  {
    version: "0.1.188",
    date: "2025-12-26",
    fixed: [
      "iOS PWA: безопасная зона снизу теперь рисуется как подложка (`--app-gap-bottom`) без растягивания высоты (`--app-vh`) — меньше чёрной полосы/прыжков",
      "Chat: pinned-bottom автоскролл больше не делает поздний «snap» — меньше «прыжков» после ручной прокрутки",
    ],
    improved: [
      "iOS: введён `--safe-bottom-layout-pad`, чтобы не было «двойного» safe-area padding при отдельном gap",
      "Mobile: скрыты постоянные scrollbars на тач‑устройствах (iOS «полоска справа»)",
      "Mobile: desktop-only подсказки (Ctrl/F) скрыты в статусах/страницах",
    ],
  },
  {
    version: "0.1.187",
    date: "2025-12-25",
    fixed: ["Mobile: отключён горизонтальный скролл в списках/истории (меньше «сдвигов» и полос прокрутки)"],
  },
  {
    version: "0.1.186",
    date: "2025-12-25",
    fixed: ["Chat: меньше «прыжков» истории при обновлениях/перерендере (упрощён pinned-bottom автоскролл)"],
  },
  {
    version: "0.1.185",
    date: "2025-12-25",
    fixed: [
      "iOS Safari: убрали always-fixed `#app` на мобилке (меньше шансов, что низ UI окажется под Safari-панелью); offset/fixed включается только при `visualViewport.offsetTop` во время клавиатуры",
    ],
    improved: [
      "Mobile UI: «Выход» больше не использует символ Esc (⎋)",
      "Mobile UI: кнопка поиска в чате больше не показывает «Ctrl+F»",
    ],
  },
  {
    version: "0.1.184",
    date: "2025-12-25",
    improved: [
      "Mobile/Tablet: убраны подсказки про F‑клавиши и Esc, мини‑инструкция и help‑modal адаптированы под тач‑навигацию",
      "Update modals: добавлены кнопки «Обновить»/«Позже» (на мобильных больше нет зависимостей от клавиатуры)",
    ],
    fixed: [
      "Chat: статус входящего файла больше не показывает «/ F7» на мобильных",
      "Sidebar: «Выход» больше не показывает «(F10)» на мобильных",
    ],
  },
  {
    version: "0.1.183",
    date: "2025-12-25",
    fixed: [
      "Chat: pinned-bottom теперь держится при изменении высоты контента (например, догрузка превью/картинок) — меньше «прыжков»",
      "Chat: убраны лишние image-load слушатели в автоскролле (меньше дерганий и утечек слушателей)",
    ],
    improved: ["Tests: добавлен регресс-тест сохранения scrollTop при DOM replace (iOS/WebKit кейс)"],
  },
  {
    version: "0.1.182",
    date: "2025-12-25",
    fixed: [
      "iPhone: mobile fullscreen контейнер `#app` теперь фиксируется через `inset: 0` (меньше шансов на «тёмный низ»/обрезание экрана)",
      "iOS клавиатура: в режиме `app-vv-offset` учитываем и низ (`bottom: --app-vv-bottom`), чтобы компоузер не «висел» и не оставлял пустую полосу",
      "Chat: при перерендере истории сохраняем `scrollTop` (iOS/WebKit меньше «прыгает»)",
    ],
    improved: ["Chat: pinned-bottom поддерживается при resize (клавиатура/автосайз) через `ResizeObserver`"],
  },
  {
    version: "0.1.181",
    date: "2025-12-25",
    fixed: [
      "iPhone: safe-area низ теперь красится цветом нижней панели (`--safe-area-bg`) — меньше шансов на «тёмный подвал»",
      "iOS: нижняя панель (composer) на мобилке стала непрозрачной (без blur), чтобы не появлялась лишняя тёмная полоса",
    ],
    added: ["Debug HUD: включение через `?debug=1` (показывает viewport vars/visualViewport/scroll метрики)"],
  },
  {
    version: "0.1.180",
    date: "2025-12-25",
    fixed: [
      "iPhone: добавлен `html.is-ios { position: fixed }` как в tweb — меньше «прыжков»/скролла при фокусе на поле ввода",
      "iPhone PWA: высота `--app-vh` снова включает safe‑area (в standalone режиме), чтобы компоузер не «висел» выше низа экрана",
      "Viewport: добавили CSS переменную `--vh` (tweb‑style) и снизили лишние перерисовки при скролле (меньше дёргается история чата)",
    ],
  },
  {
    version: "0.1.179",
    date: "2025-12-25",
    fixed: [
      "iPhone: fullscreen высота теперь берётся из visual viewport (innerHeight) как в tweb — меньше шансов на обрезание низа интерфейса",
      "Mobile: убран `max(100dvh, --app-vh)` (мог приводить к клипу под Safari UI)",
      "Mobile: страницы получают нижний safe‑area padding, когда компоузер скрыт (Info/Profile/Search/Files)",
    ],
  },
  {
    version: "0.1.178",
    date: "2025-12-25",
    fixed: ["iPhone PWA: fallback на safe-area inset для высоты #app, если screen gap недоступен"],
  },
  {
    version: "0.1.177",
    date: "2025-12-25",
    fixed: [
      "iPhone PWA: #app учитывает safe‑area gap как часть высоты (полотно и компоузер больше не обрезаются снизу)",
    ],
  },
  {
    version: "0.1.176",
    date: "2025-12-25",
    fixed: [
      "iPhone PWA: safe‑area снизу рисуется по реальному inset (без обрезания/чёрной полосы)",
      "Mobile: padding компоузера использует clamp‑safe‑area, overlay использует raw inset",
    ],
  },
  {
    version: "0.1.175",
    date: "2025-12-25",
    fixed: [
      "iPhone PWA: нижний gap безопасной зоны рисуется отдельно (без исчезновения меню/ввода)",
      "Mobile: фон нижних табов совпадает с панелью (без тёмной полосы снизу)",
    ],
    improved: ["Viewport: вместо растягивания лейаута до screen.height считаем gap и красим его подложкой"],
  },
  {
    version: "0.1.174",
    date: "2025-12-25",
    fixed: [
      "iPhone PWA: фон safe‑area на мобилке совпадает с панелью (без тёмной полосы снизу)",
      "Mobile: background html/body синхронизирован с sidebar",
    ],
  },
  {
    version: "0.1.173",
    date: "2025-12-25",
    fixed: [
      "iPhone PWA: #app поднят над safe‑area подложкой (не перекрывает меню/ввод)",
      "Mobile: нижняя панель и компоузер снова видимы",
    ],
  },
  {
    version: "0.1.172",
    date: "2025-12-25",
    fixed: [
      "iPhone PWA: safe‑area подложка перенесена на body, чтобы покрывать скруглённые углы",
      "Mobile: фон заполняет нижний inset вне #app",
    ],
  },
  {
    version: "0.1.171",
    date: "2025-12-25",
    fixed: [
      "iPhone PWA: подложка safe‑area снизу закрашивается фоном приложения (без чёрных углов)",
      "Mobile: html/body минимум 100dvh для стабильного фона на экранах со скруглением",
    ],
  },
  {
    version: "0.1.170",
    date: "2025-12-25",
    fixed: [
      "iPhone PWA: высота #app не ниже 100dvh (меньше чёрной полосы снизу)",
      "iOS клавиатура: при фокусе остаётся высота по --app-vh, без лишнего растяжения",
    ],
  },
  {
    version: "0.1.169",
    date: "2025-12-25",
    fixed: [
      "iPhone PWA: уменьшен нижний отступ, safe‑area ограничен и #app расширен по высоте",
      "Mobile: меньше пустого места снизу в контактах и при вводе",
    ],
  },
  {
    version: "0.1.168",
    date: "2025-12-25",
    fixed: [
      "iPhone PWA: уменьшен нижний отступ и убрана чёрная полоса (контакты и компоузер)",
      "Mobile: корректнее заполняется высота экрана через --app-vh",
    ],
  },
  {
    version: "0.1.167",
    date: "2025-12-25",
    improved: [
      "Меню вкладок: прозрачный фон без боковой заливки, список контактов видно при прокрутке",
      "Mobile: вкладки также без боковой заливки, фон прозрачный",
    ],
  },
  {
    version: "0.1.166",
    date: "2025-12-24",
    improved: [
      "Сайдбар: вкладки Контакты/Доски/Чаты встроены в левую колонку и доходят до нижнего края",
      "Чат: компоузер перенесён внутрь правой колонки, панель слева больше не обрывается над полем ввода",
    ],
  },
  {
    version: "0.1.165",
    date: "2025-12-24",
    improved: [
      "Десктоп: нижние вкладки (Контакты/Доски/Чаты) закреплены в одном месте во всех меню",
      "Компоузер: при открытии страниц (не main) нижняя панель остаётся с вкладками, поле ввода скрывается",
    ],
  },
  {
    version: "0.1.164",
    date: "2025-12-24",
    fixed: [
      "Мобильный fullscreen: #app привязан к top/bottom visualViewport, меньше шансов на чёрную полосу",
      "Сайдбар: список скроллится в отдельном контейнере, нижние вкладки остаются на месте",
      "Контекстное меню: стабилизация скролла учитывает новый контейнер сайдбара",
    ],
  },
  {
    version: "0.1.163",
    date: "2025-12-24",
    improved: [
      "Мобильное контекстное меню: лист прижат к нижнему краю (как в Telegram)",
      "Компоузер: батчинг ввода снижает лаг каретки в PWA desktop",
      "Мобильный fullscreen: #app фиксирован к краям экрана",
    ],
  },
  {
    version: "0.1.162",
    date: "2025-12-24",
    improved: [
      "Сайдбар: вкладки разделены по типам (Контакты — активные ЛС, Чаты — группы, Доски — доски)",
      "Компоузер: выровнен по ширине полотна чата, кнопки стали компактнее и прямоугольнее",
      "Эмодзи‑панель: компактный размер и уменьшенные вкладки",
      "Навигация: кнопка Info стала крупнее",
    ],
    fixed: [
      "Mobile long‑press: дополнительное подавление клика после открытия контекстного меню",
      "Android/PWA: высота вьюпорта больше не опирается на outerHeight вне iOS",
    ],
  },
  {
    version: "0.1.161",
    date: "2025-12-24",
    improved: [
      "Мобильная боковая панель: вкладки перенесены вниз и добавлена вкладка «Доски»",
      "Десктоп: нижняя навигация по разделам в сайдбаре (Контакты/Доски/Чаты)",
    ],
  },
  {
    version: "0.1.160",
    date: "2025-12-24",
    improved: ["Контекстное меню: группировка, эмодзи‑иконки, компактный mobile‑sheet без затемнения"],
    fixed: ["Mobile long‑press: открытие контекстного меню больше не активирует чат"],
  },
  {
    version: "0.1.159",
    date: "2025-12-24",
    fixed: ["Производительность: снижена нагрузка при вводе (превью в списках не пересчитываются на каждое нажатие)"],
  },
  {
    version: "0.1.158",
    date: "2025-12-24",
    improved: [
      "Чаты/доски: превью последнего сообщения под именем (как у контактов)",
      "Отображение сообщений: «Елочка/Компактный/Текстовый» теперь визуально отличаются",
    ],
    fixed: ["Чат: уменьшен «желе‑эффект» при прокрутке на touch"],
  },
  {
    version: "0.1.157",
    date: "2025-12-24",
    improved: ["Отображение сообщений: режимы «Елочка/Список/Компактный» заметно меняют вид на мобильных"],
    fixed: ["Профиль: режим «Елочка» отображается корректным названием"],
  },
  {
    version: "0.1.156",
    date: "2025-12-24",
    improved: ["Контакты: превью последнего сообщения под именем без открытия чата"],
  },
  {
    version: "0.1.155",
    date: "2025-12-24",
    added: ["Файлы: окно отправки с превью и подписью (как в Telegram)"],
  },
  {
    version: "0.1.154",
    date: "2025-12-24",
    added: ["Профиль: выбор отображения сообщений (облачка / текстовый / компактный)"],
  },
  {
    version: "0.1.153",
    date: "2025-12-24",
    improved: ["Файлы: вставка/drag&drop берут подпись из поля ввода (если один файл)"],
    fixed: ["Файлы: вставка из буфера нормализует имя/расширение, отказ сервера больше не выглядит как «отправлено»"],
  },
  {
    version: "0.1.152",
    date: "2025-12-24",
    fixed: ["Чат: авто‑прокрутка к последнему сообщению при открытии и после отправки"],
  },
  {
    version: "0.1.151",
    date: "2025-12-24",
    improved: ["Поиск: добавлены локальные результаты по контактам, чатам/доскам и истории сообщений"],
  },
  {
    version: "0.1.150",
    date: "2025-12-24",
    improved: ["Меню: кнопка входа/выхода показывает «выход» или «зайти» в зависимости от статуса входа"],
  },
  {
    version: "0.1.149",
    date: "2025-12-24",
    improved: ["Эмодзи: увеличен размер в панели и в сообщениях, где только эмодзи (x2)"],
  },
  {
    version: "0.1.148",
    date: "2025-12-24",
    improved: ["Профиль чата/доски: кнопки «Покинуть» и «Удалить для всех» с подтверждением"],
  },
  {
    version: "0.1.147",
    date: "2025-12-24",
    improved: ["Контакты: кнопка «Выход» убрана из списка (осталась в меню)"],
  },
  {
    version: "0.1.146",
    date: "2025-12-24",
    fixed: [
      "Сеть: автопереподключение ставится на паузу при offline/background (меньше «бесконечного» reconnect)",
      "iPhone: ограничиваем объём локальной истории при смене чатов (меньше зависаний/чёрного экрана)",
    ],
  },
  {
    version: "0.1.145",
    date: "2025-12-24",
    improved: ["Контакты: убраны дубли «Info/Создать чат/Создать доску» из контакт‑листа на десктопе (есть в меню)"],
  },
  {
    version: "0.1.144",
    date: "2025-12-24",
    improved: ["Авторизация: вход по ID или @логину (если логин задан)"],
  },
  {
    version: "0.1.143",
    date: "2025-12-24",
    added: [
      "Чаты/доски: описание и правила при создании и в профиле (редактирование владельцем)",
      "Инвайты: карточка с описанием/правилами + кнопки «Вступить/Отклонить/Спам»",
    ],
    improved: ["Инвайты: блокировка отправителя из карточки приглашения"],
  },
  {
    version: "0.1.142",
    date: "2025-12-23",
    improved: ["Меню: кнопки входа/выхода перенесены в меню"],
    fixed: ["Hotkeys: выход не конфликтует с открытием контекстного меню с клавиатуры"],
  },
  {
    version: "0.1.141",
    date: "2025-12-23",
    improved: [
      "Чат: фото группируются в компактные альбомы (3+ подряд), превью не растягиваются на всю ширину",
      "Чат/Файлы: превью стали компактнее, при наведении мягко увеличиваются",
    ],
    fixed: ["Чат: горизонтальные свайпы по истории блокируются, меньше «двигается полотно»"],
  },
  {
    version: "0.1.140",
    date: "2025-12-23",
    improved: [
      "Файлы: передачи группируются пачками, показывают адресата и быстрый переход к профилю",
      "Файлы: предпросмотр фото/видео с кликом на скачивание, повторные скачивания идут из кэша",
      "Файлы: управление кэшем (лимит 1/5/10/30 ГБ, автоочистка день/неделя/месяц, кнопка очистки)",
    ],
    fixed: ["Кэш файлов: учитываем лимиты и удаляем старые записи по политике"],
  },
  {
    version: "0.1.139",
    date: "2025-12-23",
    improved: [
      "Создание чатов/досок: карточные блоки формы как в профиле, без растяжения при закрытии клавиатуры",
      "Контакты (светлая тема): hover выбранного контакта темнее и читабельнее",
    ],
    fixed: ["Чат: полотно истории лучше фиксируется на touch (только вертикальный свайп)"],
  },
  {
    version: "0.1.138",
    date: "2025-12-23",
    improved: [
      "Профиль: при изменении полей страница не сбрасывает скролл наверх",
      "Контакты (светлая тема): hover/selected контрастнее, выделение темно‑синее",
    ],
    fixed: ["Чат: полотно истории стабильнее на touch (меньше «сдвига» при свайпе)"],
  },
  {
    version: "0.1.137",
    date: "2025-12-23",
    improved: [
      "Профиль: переключение светлой/тёмной темы больше не меняет скин",
      "Telegram-exact: добавлен тёмный режим с адаптивными токенами",
      "Меню (мобильное): крупные кнопки и более заметная подсветка",
    ],
    fixed: [
      "Скины: при ошибке загрузки списка текущий скин не сбрасывается",
      "Список чатов: выбранный контакт читается лучше (контраст в selected)",
    ],
  },
  {
    version: "0.1.136",
    date: "2025-12-23",
    fixed: ["PWA: исправлен некорректный regex в SW (регистрация в Chrome/Safari)"],
  },
  {
    version: "0.1.135",
    date: "2025-12-23",
    improved: [
      "PWA уведомления: авто‑регистрация SW при отсутствии + более ранний запуск регистрации",
      "PWA уведомления: статус ошибки регистрации SW",
    ],
  },
  {
    version: "0.1.134",
    date: "2025-12-23",
    improved: [
      "PWA уведомления: таймаут ожидания SW + детальные статусы (нет регистрации/контроллера)",
      "PWA уведомления: диагностика ошибок getSubscription",
    ],
  },
  {
    version: "0.1.133",
    date: "2025-12-23",
    improved: [
      "PWA уведомления: авто‑подписка с повторными попытками и статусом проверки SW",
      "PWA уведомления: статус 'Push уже включен' при совпадении подписки",
    ],
  },
  {
    version: "0.1.132",
    date: "2025-12-23",
    improved: ["PWA уведомления: авто‑подписка при наличии разрешения", "PWA уведомления: расширенная диагностика статуса"],
  },
  {
    version: "0.1.131",
    date: "2025-12-23",
    fixed: ["PWA уведомления: запрос разрешения совместим с Safari (callback/promise API)"],
  },
  {
    version: "0.1.130",
    date: "2025-12-23",
    fixed: ["Mac/Safari: запрос разрешений на уведомления выполняется сразу по клику"],
  },
  {
    version: "0.1.129",
    date: "2025-12-23",
    improved: ["Уведомления: запрос разрешения доступен даже после запрета, с подсказкой по настройкам"],
  },
  {
    version: "0.1.128",
    date: "2025-12-23",
    added: ["Профиль: кнопка «Принудительно обновить PWA» для ручного обновления клиента"],
  },
  {
    version: "0.1.127",
    date: "2025-12-23",
    added: [
      "PWA: Web Push подписка + управление в профиле (при наличии ключей на сервере)",
      "PWA: потоковые скачивания больших файлов через Service Worker (без удержания в памяти)",
    ],
    improved: [
      "PWA: локальные уведомления при скрытой вкладке (если разрешены)",
      "iOS/PWA: безопаснее вычисляется высота для устранения «чёрной полосы»",
      "Контекст‑меню на touch: меньше ложного выделения и системных меню",
    ],
  },
  {
    version: "0.1.126",
    date: "2025-12-23",
    added: ["PWA: share_target (Поделиться → Yagodka) с приёмом файлов через Service Worker"],
    improved: ["PWA: runtime‑кэш теперь только для статических ассетов, с лимитами и без кэширования лишних GET"],
  },
  {
    version: "0.1.125",
    date: "2025-12-23",
    added: ["Профили чатов/досок: список участников и быстрые действия"],
    improved: [
      "Чаты: запрет писать для отдельных участников (индикатор + блокировка композера)",
      "Профиль: быстрый переключатель светлого/тёмного скина",
      "Контекст‑меню: компактнее и ближе к Telegram",
    ],
  },
  {
    version: "0.1.124",
    date: "2025-12-23",
    improved: [
      "Эмодзи: панель в стиле Telegram Web (поиск, вкладки, секции, анимация открытия)",
      "Эмодзи: более ровный рендер за счёт emoji‑font стека и font‑variant‑emoji",
    ],
  },
  {
    version: "0.1.123",
    date: "2025-12-23",
    added: ["Скин `telegram-exact`: палитра, типографика и размеры под Telegram Web (tweb)"],
    improved: [
      "Telegram-скин: пузырьки с хвостиками, ровные разделители списка, корректные размеры аватаров",
      "Telegram-скин: иконка отправки заменена на бумажный самолётик, без лишних теней/blur",
    ],
  },
  {
    version: "0.1.122",
    date: "2025-12-23",
    fixed: ["Android/PWA: не используем screen.height на не‑iOS — поле ввода не уезжает под экран"],
  },
  {
    version: "0.1.121",
    date: "2025-12-23",
    fixed: [
      "Чат: автоскролл удерживает низ при открытии и наборе текста (не «застревает» посередине)",
      "История: автоскролл теперь зависит от sticky-флага, а не от текущего clientHeight (устойчиво при изменении высоты ввода)",
    ],
  },
  {
    version: "0.1.120",
    date: "2025-12-23",
    fixed: [
      "Чат: показываем имя отправителя по профилю/handle (особенно в группах), можно открыть профиль кликом по имени/аватару",
      "Контекст‑меню сообщений: добавлен пункт «Профиль отправителя»",
      "Android/PWA: клавиатура надёжнее срабатывает по visualViewport (меньше «уезжает» поле ввода)",
    ],
  },
  {
    version: "0.1.119",
    date: "2025-12-23",
    fixed: [
      "Чаты: при открытии снова держим скролл у низа, даже если картинки догружаются (не «в середине истории»)",
      "iOS/Touch: кастомная каретка отключена на тач‑устройствах — меньше кривых позиций после клавиатуры",
      "Viewport: клавиатура считается активной только при фокусе на input/textarea (меньше ложных сдвигов)",
    ],
    improved: [
      "Контекст‑меню на мобилке компактнее (не на пол‑экрана)",
      "Скины: унифицирована типографика/геометрия под Telegram‑схему",
    ],
  },
  {
    version: "0.1.118",
    date: "2025-12-23",
    fixed: [
      "iPhone/PWA: убрали постоянный fixed для html/#app — чёрная полоса снизу должна исчезнуть",
      "iOS: сдвиг visualViewport применяется только при активной клавиатуре (app-vv-offset)",
    ],
  },
  {
    version: "0.1.117",
    date: "2025-12-23",
    fixed: ["iPhone/PWA: усилили фуллскрин (html фиксируется, высота берётся из --app-vh) — меньше шансов на чёрную полосу снизу"],
    improved: ["Viewport: --app-vh/--safe-bottom теперь пишем и в :root, чтобы iOS корректно растягивал layout"],
  },
  {
    version: "0.1.116",
    date: "2025-12-23",
    fixed: [
      "Mobile: поиск в сайдбаре больше не теряет фокус (клавиатура не закрывается после 1 символа)",
      "Медиа: превью в истории стабильнее (MIME прокидывается, HEIC/HEIF распознаются, кеш восстанавливается даже без MIME)",
      "Статусы: queued/delivered теперь визуально различимы",
    ],
    improved: [
      "Context menu на touch компактнее и без выделения текста/IOS callout",
      "iOS/PWA: обновляем высоту при pageshow/visibility и ограничиваем авто‑масштаб при клавиатуре",
    ],
  },
  {
    version: "0.1.115",
    date: "2025-12-23",
    improved: [
      "Медиа: изображения из истории больше не «пропадают» после перезахода — восстанавливаем превью из CacheStorage (blob cache) и подставляем `blob:` URL в UI",
      "Медиа: для последних маленьких картинок делаем тихую подзагрузку (без спама в статус‑строке), чтобы чат выглядел как «настоящий» мессенджер",
    ],
    added: [
      "Helper: `fileBlobCache` (CacheStorage) для превью изображений",
      "Repro: `public/repro/ios-input-assistant.html` — страница для проверки iOS PWA панели над клавиатурой",
      "Regress: `fileBlobCache.test.mjs`",
      "Regress: `iosInputAssistantReproPage.test.mjs`",
    ],
  },
  {
    version: "0.1.114",
    date: "2025-12-23",
    improved: [
      "Медиа: file viewer теперь открывается поверх приложения (fullscreen overlay) — ближе к Telegram и не «ломает» чат/прокрутку",
      "Медиа: превью изображений в чате стало чуть крупнее и аккуратнее (без лишних рамок)",
      "Файлы: превью изображений в списке файлов без лишней обводки (без «двойной рамки»)",
    ],
    fixed: ["Viewer: клик по фону закрывает просмотр (как ожидаемо на мобильных)"],
    added: ["Regress: `fileViewerOverlayPolicy.test.mjs` (overlay + CSS)"],
  },
  {
    version: "0.1.113",
    date: "2025-12-23",
    fixed: [
      "iPhone/PWA: #app на мобилке снова держит высоту через `--app-vh` (вместо bottom var) — меньше шансов на чёрную полосу снизу и «улёт» строки ввода",
    ],
    improved: [
      "Mobile: `nav-overlay` и `sidebar` теперь позиционируются относительно #app (absolute), поэтому при iOS visualViewport сдвигах меньше «разъезжается» интерфейс",
      "Viewport: математика keyboard/offsetTop/bottom теперь считается от layout viewport, а `screen.height` используется только для высоты без клавиатуры (меньше ложных срабатываний)",
    ],
  },
  {
    version: "0.1.112",
    date: "2025-12-23",
    fixed: ["Контакт: убрали лишнюю кнопку «Назад» внизу (используем back в шапке)"],
    improved: [
      "Контакт: CTA «Сообщение» теперь сразу под шапкой профиля (Telegram‑паттерн)",
      "Cyberberry CRT: CRT‑оверлей (#app::before/#app::after) учитывает visualViewport top/bottom — меньше артефактов при клавиатуре в iOS PWA",
    ],
    added: ["Regress: `userPagePolish.test.mjs`", "Regress: `skinCyberberryCrtOverlay.test.mjs`"],
  },
  {
    version: "0.1.111",
    date: "2025-12-23",
    fixed: ["iPhone/PWA: #app на мобилке теперь «поджимается» снизу по visualViewport (bottom var) — меньше шансов на чёрную полосу и «улёт» композера при фокусе"],
    improved: ["iOS PWA: input‑assistant (Undo/Redo/✓) применяется и при программном фокусе полей (модалки/страницы) — панель появляется реже"],
    added: ["Helper: `focusElement` для безопасного фокуса на input/textarea", "Regress: обновлены тесты viewport/mobile fullscreen под `--app-vv-bottom`"],
  },
  {
    version: "0.1.110",
    date: "2025-12-23",
    improved: [
      "Mobile: на экранах (профиль/контакт/поиск/файлы/info) кнопка в шапке теперь «Назад»",
      "Mobile: профиль/контакт ближе к Telegram — крупный аватар, центрирование, кнопки в сетке, меньше визуального шума",
    ],
    added: ["Regress: `mobilePagesPolishCss.test.mjs`", "Regress: renderHeader проверяет `nav-back` на страницах"],
  },
  {
    version: "0.1.109",
    date: "2025-12-23",
    improved: [
      "Mobile: композер ближе к Telegram — «бар» стал цельнее (лёгкий blur/прозрачность), текст плотнее и чуть жирнее",
      "iPhone/PWA: стабильнее реагируем на клавиатуру (учитываем реальную «закрытую снизу» часть viewport, слушаем scroll/focus)",
    ],
    added: ["Regress: `mobileComposerPolishCss.test.mjs`"],
  },
  {
    version: "0.1.108",
    date: "2025-12-23",
    fixed: ["iPhone/PWA: учли `visualViewport.offsetTop` — убрали чёрную полосу снизу и «улёт» строки ввода при клавиатуре"],
    added: ["Regress: viewport учитывает `visualViewport.offsetTop`", "Regress: mobile fullscreen использует `top: var(--app-vv-top, 0px)`"],
  },
  {
    version: "0.1.107",
    date: "2025-12-23",
    improved: ["Mobile: список диалогов ближе к Telegram (сепараторы, time/unread в колонку, крупнее аватар)"],
    added: ["Mobile: online‑точка на аватаре в списке диалогов", "Regress: `mobileDialogsListCss.test.mjs`"],
  },
  {
    version: "0.1.106",
    date: "2025-12-23",
    fixed: [
      "iPhone/PWA: #app теперь фиксирован (fixed) на мобильных — меньше шансов на «уехавший» лейаут/прокрутку и чёрные полосы по краям",
      "iPhone/PWA: фон приложения принудительно покрывает весь экран (включая safe-area снизу)",
    ],
    improved: ["Viewport: при фокусе на input/textarea переключаемся на visualViewport даже при меньшей разнице (надёжнее при клавиатуре)"],
    added: ["Regress: тесты на mobile fullscreen (`position: fixed`) и keyboard‑эвристику при фокусе"],
  },
  {
    version: "0.1.105",
    date: "2025-12-23",
    improved: ["iOS PWA: input‑assistant получил режимы `predictive/strict` (чётче контролируем появление панели Undo/Redo/✓ над клавиатурой)"],
    added: ["Regress: `iosInputAssistantWorkaround` покрывает режим `strict`"],
    fixed: ["Dev: `npm test` больше не подхватывает чужие `*.test.*` вне `client-web/test/` (ускоряет web-check)"],
  },
  {
    version: "0.1.104",
    date: "2025-12-22",
    fixed: ["iPhone/PWA: если видна полоса снизу — используем `screen.height`, когда он близок к viewport (закрывает safe-area)"],
    added: ["Regress: viewport использует `screen.height` в «безопасном» диапазоне"],
  },
  {
    version: "0.1.103",
    date: "2025-12-22",
    fixed: [
      "iPhone/PWA: композер больше не «подпрыгивает» вверх при клавиатуре (safe-area снизу отключаем, пока клавиатура открыта)",
      "iPhone/PWA: #app высота учитывает clientHeight (safe-area) — меньше шансов на чёрную полосу снизу",
    ],
    improved: ["Viewport: добавили регресс‑тест на clientHeight (safe-area)"],
  },
  {
    version: "0.1.102",
    date: "2025-12-22",
    improved: ["Mobile: контекстные меню на touch теперь открываются как bottom‑sheet (как в Telegram)"],
    added: ["Регресс‑тест: `contextMenuSheet.test.mjs`"],
  },
  {
    version: "0.1.101",
    date: "2025-12-22",
    fixed: ["Mobile + скины: mobile‑настройки теперь не перебиваются скином (используем `:root[data-skin]` и более специфичные селекторы)"],
    improved: ["Mobile: композер и пузырьки стали компактнее (меньше внутренних отступов/зазоров)"],
    added: ["Регресс‑тест: `mobileResponsiveOverrides.test.mjs`"],
  },
  {
    version: "0.1.100",
    date: "2025-12-22",
    fixed: ["Mobile: усилили фуллскрин‑лейаут независимо от скина (прямые `padding/border/radius/shadow/overflow`) — меньше шансов, что UI «уедет»"],
  },
  {
    version: "0.1.99",
    date: "2025-12-22",
    improved: ["iOS/mobile: включили инерционную прокрутку для списков/истории (`-webkit-overflow-scrolling: touch`)"],
    added: ["Регресс‑тест: `mobileScrollContainers.test.mjs` (защита от потери инерции на iOS)"],
  },
  {
    version: "0.1.98",
    date: "2025-12-22",
    fixed: ["ПКМ по контакту/чату: усилили стабилизацию скролла (scroll-lock на время открытия меню) — список не «улетает»"],
  },
  {
    version: "0.1.97",
    date: "2025-12-22",
    added: ["Mobile: в сайдбаре добавили строку поиска (локальный фильтр) для вкладок «Чаты/Контакты»"],
    improved: ["Mobile: верх сайдбара (заголовок/табы/поиск) теперь sticky — удобнее навигация как в Telegram"],
  },
  {
    version: "0.1.96",
    date: "2025-12-22",
    added: ["iOS (Safari): ненавязчивая подсказка установки PWA (Поделиться → «На экран Домой»)"],
    improved: ["Info: добавили раздел «Установка на телефон» (iOS/Android)"],
  },
  {
    version: "0.1.95",
    date: "2025-12-22",
    improved: [
      "iOS/PWA: `--app-vh` теперь берём из innerHeight по умолчанию (закрывает safe-area без «чёрной полосы»), а на visualViewport переключаемся только при большой разнице (клавиатура)",
    ],
    added: ["Регресс‑тесты: `appViewportVar.test.mjs` расширен (innerHeight vs visualViewport)"],
  },
  {
    version: "0.1.94",
    date: "2025-12-22",
    improved: [
      "iOS/PWA: добавили JS‑переменную высоты `--app-vh` (через visualViewport/innerHeight) и подключили её в CSS (#app height/min-height) — меньше шансов, что composer/скролл «уедут» при адрес-баре/клавиатуре",
    ],
    added: ["Регресс‑тесты: `appViewportVar.test.mjs` проверяет CSS и установку `--app-vh`"],
  },
  {
    version: "0.1.93",
    date: "2025-12-22",
    fixed: ["iOS/PWA: убрали min-height:-webkit-fill-available из базового #app (оставили только в fallback без 100dvh) — меньше шансов на «прыжки» и поломанную прокрутку"],
    improved: ["Добавлен регресс‑тест: скины не должны переопределять `.hidden` (это ломает лейаут/скролл)"],
  },
  {
    version: "0.1.92",
    date: "2025-12-22",
    fixed: [
      "iOS/PWA: исправили «разъезд» лейаута/потерю скролла — больше не форсим height:-webkit-fill-available на современных движках (оставили только fallback, если нет 100dvh)",
      "Скролл: добавили min-height/min-width:0 для sidebar/chat/chat-host (корректный overflow:auto внутри grid/flex)",
    ],
    improved: ["Cyberberry CRT: overlay.hidden больше не переопределяет display (меньше рисков для скролла/верстки)"],
  },
  {
    version: "0.1.91",
    date: "2025-12-22",
    improved: [
      "Mobile sidebar: добавили третью вкладку «Меню» (как отдельный раздел, без смешивания с контактами)",
      "Mobile sidebar: навигацию/создание (Поиск/Профиль/Файлы/Info/Создать чат/Создать доску) перенесли из «Контакты» в «Меню»",
      "Подсказки: в «Меню» добавили компактный блок «Подсказки» + описания/tooltip’ы на пунктах",
    ],
  },
  {
    version: "0.1.90",
    date: "2025-12-22",
    improved: [
      "Доски: инвайты теперь доставляются и оффлайн (при следующем входе), как у чатов",
      "Приватные доски: «Принять приглашение» работает корректно (вступление через подтверждение инвайта, а не через public join)",
    ],
    fixed: ["Доски: «Отклонить приглашение» теперь сообщает серверу — приглашение не приходит повторно"],
  },
  {
    version: "0.1.89",
    date: "2025-12-22",
    improved: ["Сайдбар: убрали отдельную секцию «Ожидают» — запросы/инвайты теперь подсвечиваются прямо в списке контактов"],
    fixed: ["Сайдбар: запросы от неизвестных пользователей не теряются — показываем их отдельными строками в блоке «Внимание»"],
  },
  {
    version: "0.1.88",
    date: "2025-12-22",
    improved: [
      "iPhone/Android: #app теперь предпочитает 100dvh (вместо 100svh), меньше шансов на «пустую» полосу снизу при нестабильных viewport-юнитах",
    ],
    fixed: ["Сайдбар: дополнительная стабилизация скролла при ПКМ/контекстном меню (без резких прыжков списка)"],
    added: ["Repro: public/ios-input-lab.html — минимальная страница для проверки iOS input toolbar (Undo/Redo/✓)"],
  },
  {
    version: "0.1.87",
    date: "2025-12-22",
    added: ["Контакты: контекстное меню → «Пригласить в чат/доску…» с выбором ваших чатов/досок (инвайт приходит пользователю в ЛС)"],
    improved: [
      "Инвайты/авторизация/входящие файлы: больше нет блокирующих action‑модалок — всё отображается как системные сообщения в ЛС с кнопками действий",
      "Медиа в чате: изображения показываются без «карточной» рамки, а кнопки принять/скачать — поверх превью (прогресс upload/download — деликатным оверлеем)",
    ],
    fixed: ["Файлы: входящий file_offer больше не открывает модалку автоматически — ничего не перекрывает чат"],
  },
  {
    version: "0.1.86",
    date: "2025-12-22",
    improved: [
      "Файлы/медиа: можно добавить подпись к фото/файлу (берём текст из композера при отправке одного файла) — подпись сохраняется в истории и рендерится под превью",
      "Сообщения с вложением: разрешили редактировать подпись через контекстное меню (Изменить подпись…)",
    ],
  },
  {
    version: "0.1.85",
    date: "2025-12-22",
    improved: [
      "Сообщения: при редактировании показываем время правки («изменено HH:MM»), а сервер теперь отдаёт edited_ts в истории/бэклоге",
    ],
  },
  {
    version: "0.1.84",
    date: "2025-12-22",
    added: ["Android: предложение установить PWA (beforeinstallprompt) — показываем ненавязчивый toast «Установить/Позже»"],
    improved: [
      "iPhone (Safari/PWA): добавлен fallback на -webkit-fill-available для стабильно полного экрана (#app) — меньше шансов на пустую полосу снизу",
      "Toast: поддержаны произвольные actions (нужно для install‑prompt и будущих сценариев)",
    ],
  },
  {
    version: "0.1.83",
    date: "2025-12-22",
    improved: ["iOS PWA: для композера включаем autocorrect/spellcheck/autocapitalize до focus — панель Undo/Redo/✓ появляется заметно реже"],
    added: [
      "Repro: public/repro/ios-input-assistant.html — минимальная страница для сравнения strict vs iOS-friendly режимов",
      "Regress tests: iosInputAssistantWorkaround — проверка, что workaround включает нужные атрибуты в iOS standalone",
    ],
    notes: ["Полностью отключить системную панель в WebKit нельзя; цель — снизить частоту появления и вернуть нормальную клавиатуру с подсказками."],
  },
  {
    version: "0.1.82",
    date: "2025-12-22",
    added: ["Web: добавлена поддержка React (Vite plugin + TSX) для постепенного внедрения компонентного UI"],
    improved: ["Info: добавлен небольшой бейдж «React» (проверка, что связка реально работает)"],
    notes: ["Оставляем основной UI на vanilla TS; React используем точечно. Vue подключим отдельно, если решим, что он действительно нужен."],
  },
  {
    version: "0.1.81",
    date: "2025-12-22",
    improved: [
      "Composer: системный sans‑шрифт и более «телеграмовское» ощущение ввода",
      "Composer: автофокус после выбора чата включён и для touch (с небольшой задержкой, чтобы не конфликтовать с закрытием drawer)",
      "Курсор/каретка: кастомная каретка стала менее «шумной» (мягче свечение, без жёсткого градиента)",
    ],
    added: ["Regress test: composer tokens (sans font + font-size>=16 для iOS)"],
  },
  {
    version: "0.1.80",
    date: "2025-12-22",
    fixed: ["Сайдбар: при открытии контекстного меню (ПКМ/Ctrl+Click) список больше не должен «скакать» — фиксируем scroll до закрытия меню"],
    added: ["Regress test: rafScrollLock — проверка scroll-lock на requestAnimationFrame"],
  },
  {
    version: "0.1.79",
    date: "2025-12-22",
    improved: [
      "Авторизация: если ID уже сохранён — поле ID блокируется от случайного редактирования, но его можно быстро «разблокировать» кнопкой «Сменить ID»",
      "Dropdown/select: стрелка и hover/focus стали заметнее, сохранили нативное поведение",
    ],
    added: ["Regress tests: auth ID-lock (rememberedId → readonly + «Сменить ID»)"],
  },
  {
    version: "0.1.78",
    date: "2025-12-22",
    improved: [
      "Mobile: фуллскрин принудительно для всех скинов (Safari + PWA) — без «карточки» и лишних отступов",
      "Mobile: composer учитывает safe-area снизу без ощущения «двойного» паддинга",
    ],
    added: ["Regress tests: mobile safe-area CSS (fullscreen overrides + composer padding)"],
  },
  {
    version: "0.1.77",
    date: "2025-12-22",
    improved: [
      "iOS PWA: workaround для системной панели Undo/Redo/✓ применяется до focus (pointerdown/touchstart) — проявляется заметно реже",
      "Авторизация: поле ID помечено data-ios-assistant=off (не вмешиваемся в numeric‑ввод)",
    ],
    added: ["Диагностика iOS: обновлена страница /ios-input-bar-test.html (режимы attrs=off/workaround/none + isIOS/standalone)"],
  },
  {
    version: "0.1.76",
    date: "2025-12-22",
    added: [
      "Контакт: отдельная страница профиля (аватар/имя/@handle/ID/статус/био)",
      "Regress tests: sidebar display_name, avatar_rev storage, handleServerMessage avatar",
    ],
    improved: [
      "Контакты/чаты: если у пользователя задано имя, показываем его вместо голого ID (в сайдбаре, шапке и статус-строке)",
      "Профиль: добавлены поля «Статус» и «О себе» (bio), сохранение через серверный profile_set",
      "Аватары: серверная синхронизация (avatar_set/clear/get) + локальный кэш с avatar_rev",
    ],
  },
  {
    version: "0.1.75",
    date: "2025-12-22",
    improved: [
      "Файлы/медиа: вложения в чате и на странице «Файлы» теперь выглядят как аккуратные карточки (иконка типа, превью сверху для изображений, компактные кнопки действий)",
      "Прикрепление: выбор нескольких файлов за раз (multi-select) — удобнее отправлять пачками",
    ],
    fixed: ["UI: иконки действий у файлов (accept/reject/download) корректно отображаются во всех браузерах"],
    added: ["Regress tests: fileBadge и renderChatFileRow"],
  },
  {
    version: "0.1.74",
    date: "2025-12-22",
    improved: [
      "PWA update: service worker активируется сразу после установки (skipWaiting) — обновления подхватываются надёжнее",
      "PWA update: если SW уже на новой версии, а вкладка ещё на старой — делаем тихий перезапуск только когда безопасно (idle + нет активных загрузок + нет фокуса в полях ввода)",
      "Boot: при обновлении сначала делаем один «мягкий» reload (как Ctrl+R), и только потом — тяжёлый recover (unregister SW + очистка caches), если запуск всё ещё не удался",
    ],
    added: ["Regress test: shouldReloadForBuild — проверка логики «нужен ли перезапуск по buildId»"],
  },
  {
    version: "0.1.73",
    date: "2025-12-22",
    fixed: ["Чат: закреп/поиск теперь физически отделены от истории и не «уезжают» при прокрутке"],
    improved: ["Чат: скролл перенесён в chatHost (стабильнее jump‑to‑bottom и автоподгрузка истории)"],
    added: ["Regress test: chatFixedTop — проверка, что закреп/поиск рендерятся в chatTop, а не внутри истории"],
  },
  {
    version: "0.1.72",
    date: "2025-12-22",
    fixed: ["Сайдбар: ПКМ/Ctrl+Click больше не активирует строку и не должен «дёргать» прокрутку списка"],
    improved: ["iOS PWA: усилили workaround для панели Undo/Redo/✓ (включаем autocapitalize=sentences вместе с autocorrect/spellcheck)"],
    added: ["Regress test: sidebarContextClick — проверка, что Ctrl+Click/ПКМ не меняет выбранный чат"],
  },
  {
    version: "0.1.71",
    date: "2025-12-22",
    improved: [
      "Автовход: в шапке показываем «Входим…» (можно открыть вход вручную), чтобы меньше было «дёрганий» при старте",
      "Сессии: при успешном входе обновляем срок жизни токена в cookie/localStorage (даже если сервер не присылает session повторно)",
      "Composer: эмодзи‑кнопка теперь корректно disabled, а поповер закрывается при смене чата/страницы",
    ],
    added: ["Security regression: тесты на формат/хранилище session token и cookie‑параметры (SameSite=Strict, Secure на https)"],
  },
  {
    version: "0.1.70",
    date: "2025-12-22",
    added: ["Composer: кнопка эмодзи с быстрым пикером и списком «недавних» (локально на устройстве)"],
    improved: ["Профиль: аккуратная шапка (аватар/имя/@handle/ID) и секции «Аккаунт/Интерфейс» — ближе к привычному стилю мессенджеров"],
  },
  {
    version: "0.1.69",
    date: "2025-12-22",
    improved: [
      "Mobile: нижняя панель навигации убрана — теперь экран чище, а composer находится строго внизу (с учётом safe-area)",
      "Mobile: в боковом меню добавлены вкладки «Чаты/Контакты» (как в Telegram по смыслу): «Чаты» показывает только начатые диалоги и комнаты, «Контакты» — адресную книгу + навигацию (Поиск/Профиль/Файлы/Info)",
    ],
  },
  {
    version: "0.1.68",
    date: "2025-12-21",
    fixed: [
      "Чат: панель закрепа и поиск теперь закреплены над историей и не «уезжают» при прокрутке",
      "Редактирование сообщений: правка применяется устойчивее (fallback по msg_id, даже если в payload нет room/to)",
      "Сайдбар: ПКМ/Ctrl+Click больше не должен «ронять» скролл списка (lock scroll во время открытия меню)",
    ],
  },
  {
    version: "0.1.67",
    date: "2025-12-21",
    improved: ["Надёжность отправки: добавлена локальная outbox‑очередь (offline→send) с автоповтором на reconnect и дедупом по истории"],
  },
  {
    version: "0.1.66",
    date: "2025-12-21",
    fixed: ["Сайдбар: остаточные «скачки» скролла при ПКМ/Ctrl+Click по контактам/чатам устранены (стабилизация scroll snapshot + дедуп Pointer/Mouse)"],
  },
  {
    version: "0.1.65",
    date: "2025-12-21",
    fixed: ["Надёжность отправки: ACK (msg_id) теперь присваивается FIFO, без риска перепутать статусы при быстрой отправке нескольких сообщений"],
  },
  {
    version: "0.1.64",
    date: "2025-12-21",
    improved: ["Mobile: общий UI‑шрифт стал более «телеграмовским» (system sans), список чатов получил разделители с отступом от аватара"],
  },
  {
    version: "0.1.63",
    date: "2025-12-21",
    improved: [
      "Composer: кнопка отправки теперь выглядит «неактивной», когда отправлять нельзя (не вводит в заблуждение)",
      "Mobile: поле ввода сообщений использует системный sans‑шрифт (ближе к Telegram по ощущению)",
      "Автофокус composer: на iPad/гибридных устройствах с мышью/трекпадом фокус ставится сразу после выбора чата",
    ],
  },
  {
    version: "0.1.62",
    date: "2025-12-21",
    improved: ["Labs: ios-input-assistant.html теперь содержит атрибуты поля ввода прямо в HTML (проверка работает даже при строгом CSP)"],
  },
  {
    version: "0.1.61",
    date: "2025-12-21",
    improved: [
      "iOS PWA: workaround для панели Undo/Redo/✓ применяется при фокусе на текстовые поля (кроме полей ID/@handle)",
      "Добавлена диагностическая страница: /labs/ios-input-assistant.html",
    ],
  },
  {
    version: "0.1.60",
    date: "2025-12-21",
    improved: ["Авторизация: добавлены кнопки «показать/скрыть пароль» в окне входа/регистрации"],
  },
  {
    version: "0.1.59",
    date: "2025-12-21",
    fixed: ["ПКМ по контакту/чату в сайдбаре больше не «роняет» скролл списка (стабилизация до/после contextmenu)"],
  },
  {
    version: "0.1.58",
    date: "2025-12-21",
    improved: ["Убран неиспользуемый legacy web-код (старые файлы app/state/main/style) — меньше путаницы и «мертвых меню»"],
  },
  {
    version: "0.1.57",
    date: "2025-12-21",
    improved: [
      "Composer: кнопка отправки теперь единообразно «ягодка» (без конфликтующих стилей), в режиме редактирования — галочка",
      "Каретка в поле ввода сообщений: оставили нативную (меньше «скачет» на десктопе)",
    ],
  },
  {
    version: "0.1.56",
    date: "2025-12-21",
    added: ["Info с журналом изменений и мини‑инструкцией прямо в приложении"],
    improved: ["Подгрузка истории изменений порциями по 20 версий (автоподгрузка при прокрутке)"],
  },
  {
    version: "0.1.55",
    date: "2025-12-21",
    fixed: ["После выхода показываем сохранённый ID в шапке (ID больше не «пропадает»)"],
  },
  {
    version: "0.1.54",
    date: "2025-12-21",
    fixed: ["ID в окне входа не очищается при первом открытии модалки (после выхода просит только пароль)"],
    improved: ["Workaround для iOS PWA: панель Undo/Redo/✓ появляется реже при вводе текста"],
  },
];
